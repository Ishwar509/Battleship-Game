(()=>{"use strict";const t=class{constructor(t,e){this.name=t,this.length=e,this.health=e,this.coordinates=[],this.orientation=null}hit(){this.health-=1}isSunk(){return 0===this.health}},e=[{x:0,y:1},{x:1,y:0}];function n(t){return t[Math.floor(Math.random()*t.length)]}function r(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t.length;++r)null===t[n][r]&&e.push([n,r]);return n(e)}function s(){return`rgba(${255*Math.random()}, ${255*Math.random()}, ${255*Math.random()}, 0.5)`}function i([t,e],n){return t>=0&&t<n.length&&e>=0&&e<n.length}const o=document.querySelector(".player"),a=document.querySelector(".computer"),l=document.querySelector("#message"),c=8;function h(t){t.innerHTML="";for(let e=0;e<c;++e)for(let n=0;n<c;++n){const r=u(e,n);t.appendChild(r)}}function u(t,e){const n=document.createElement("div");return n.classList.add("cell"),n.dataset.x=t,n.dataset.y=e,n}function d({cell:t,hit:e},n){const r=n.querySelector(`[data-x="${t[0]}"][data-y="${t[1]}"]`);if(r.classList.contains("hit"))return null;r.classList.add("hit"),e&&r.classList.add("success");const s=document.createElement("span");s.innerHTML="&times;",r.prepend(s)}function p(t){l.textContent=t}let m=null,g=null;const f=new Map;let y=null,v=null,x=null,S=null,b=!1,L=null;function H(t){v=t.target,v.classList.add("dragging"),v.style.removeProperty("background-color"),b=!0,x=t.clientX,S=t.clientY}function C(t){if(b){v.classList.remove("dragging"),v.classList.remove("notplaceable"),v.style.left="0px",v.style.top="0px";const t=L;if(t&&function(t,e){const n=[Number(t.dataset.x),Number(t.dataset.y)],r=f.get(e);return y.placeShipAt(r,n,r.orientation)}(t,v))t.appendChild(v);else{const t=f.get(v);y.placeShipAt(t,t.coordinates[0],t.orientation)}}b=!1,v.style.backgroundColor=s(),k()}function M(t){b&&(y.removeShip(f.get(v)),v.style.left=t.clientX-x+"px",v.style.top=t.clientY-S+"px",L!==E()&&k(),L=E(),function(t){if(t){const e=f.get(v).length,n=function(t,e){const n=[];if(!t)return n;const r=Number(t.dataset.x),s=Number(t.dataset.y),i=f.get(v).orientation;for(let t=0;t<e;++t){const e=r+t*i.x,o=s+t*i.y,a=document.querySelector(`[data-x="${e}"][data-y="${o}"]`);a&&null===y.getBoard()[e][o]&&n.push(a)}return n}(t,e);if(n.length===e)return n.forEach((t=>{t.classList.add("highlight")})),void v.classList.remove("notplaceable")}v.classList.add("notplaceable")}(L))}function w(t){if(2===t.button){const e=60,n=t.target,r=f.get(n),s={x:1-r.orientation.x,y:1-r.orientation.y};y.placeShipAt(r,r.coordinates[0],s),n.style.width=`${Math.max(e,r.orientation.y*r.length*e)}px`,n.style.height=`${Math.max(e,r.orientation.x*r.length*e)}px`}}function E(){let t=1/0;return g.forEach((e=>{const n=Math.abs(e.getBoundingClientRect().x-v.getBoundingClientRect().x)+Math.abs(e.getBoundingClientRect().y-v.getBoundingClientRect().y);n<t&&(L=e,t=n)})),t>60?null:L}function k(){document.querySelectorAll(".highlight").forEach((t=>{t.classList.remove("highlight")}))}const A=document.querySelector(".main");function $(t){!t.target.classList.contains("hit")&&t.target.classList.contains("cell")&&function(t){if(X())return null;if(d({cell:t,hit:P.gameboardHandler.receiveAttack(t)},F),X())return null;d(P.AI.playMove(),z),X()}([t.target.dataset.x,t.target.dataset.y])}const q=class{static placeRandom(t,e){const n=[...t];for(;n.length>0;){const t=n.shift();this.tryToPlace(t,e)||n.push(t)}}static tryToPlace(t,s,i,o){i=i||r(s),o=o||n(e),this.removeShipFromBoard(t,s);const a=this.#t(t.length,i,s,o);return a.length<t.length?(t.coordinates.forEach((([e,n])=>s[e][n]=t)),!1):(t.coordinates=a,t.orientation=o,a.forEach((([e,n])=>s[e][n]=t)),!0)}static#t(t,e,n,r){const s=[];for(let o=0;o<t;++o){const t=e[0]+o*r.x,a=e[1]+o*r.y;i([t,a],n)&&null===n[t][a]&&s.push([t,a])}return s}static removeShipFromBoard(t,e){t.coordinates.forEach((([t,n])=>{e[t][n]=null}))}},R=class{constructor(){this.boardSize=8,this.Ships=[new t("Hydra",5),new t("Pegasus",4),new t("Orion",3),new t("Scorpius",2),new t("Leo",1)],this.board=this.createboard(this.boardSize),this.boardLog=this.createboard(this.boardSize),this.placeShipsRandomly()}createboard(t){return new Array(t).fill(null).map((()=>new Array(t).fill(null)))}placeShipsRandomly(){q.placeRandom(this.Ships,this.board)}placeShipAt(t,e,n){return q.tryToPlace(t,this.board,e,n)}removeShip(t){q.removeShipFromBoard(t,this.board)}areShipsSunk(){return!this.Ships.some((t=>!t.isSunk()))}receiveAttack([t,e]){return null!==this.board[t][e]&&(this.board[t][e].hit(),this.board[t][e]=null,!0)}getShips(){return this.Ships}getBoard(){return this.board}},B=class{constructor(t){this.name=t,this.gameboardHandler=new R}},N=class{constructor(t){this.board=this.createBoard(8),this.nextMoves=[],this.currHitCells=[],this.attackfn=t}createBoard(t){return new Array(t).fill(null).map((()=>new Array(t).fill(null)))}playMove(){return this.nextMoves.length>0?this.playSmart():this.playRandom()}playRandom(){const t={},e=r(this.board);if(t.cell=e,t.hit=!1,this.isHit(e)){t.hit=!0,this.currHitCells=[],this.currHitCells.push(e);const n=this.calcHitDirection();this.setNextMoves(e,n)}return t}playSmart(){const t={},e=this.nextMoves.pop();if(t.cell=e,t.hit=!1,this.isHit(e)){t.hit=!0,this.currHitCells.push(e);const n=this.calcHitDirection();this.setNextMoves(e,n)||this.changeDir()}else this.currHitCells.length>1&&this.changeDir();return t}isHit([t,e]){return this.board[t][e]="#",this.attackfn([t,e])}calcHitDirection(){const t=this.currHitCells.length;if(t>1){const[e,n]=this.currHitCells[t-1],[r,s]=this.currHitCells[t-2];return[[e-r,n-s]]}return[[0,1],[1,0],[0,-1],[-1,0]]}changeDir(){this.currHitCells.reverse();const t=this.calcHitDirection();this.setNextMoves(...this.currHitCells.slice(-1),t)}setNextMoves([t,e],n){this.nextMoves=[];for(let r=0;r<n.length;++r){const s=t+n[r][0],o=e+n[r][1];i([s,o],this.board)&&null===this.board[s][o]&&this.nextMoves.push([s,o])}return 0!==this.nextMoves.length}};let D=null,P=null,T=null,z=null,F=null;function I(){h(o),h(a),D=new B("Human"),P=new B("Computer"),P.AI=new N(D.gameboardHandler.receiveAttack.bind(D.gameboardHandler)),z=document.querySelector(".player"),F=document.querySelector(".computer"),function(t){var e;m=document.querySelector(".player"),g=document.querySelectorAll(".player .cell"),y=t.gameboardHandler,e=y.getShips(),f.clear(),e.forEach((t=>{const e=function(t){const e=document.createElement("div");return e.classList.add("ship",t.name),e.style.backgroundColor=s(),e.style.top="0px",e.style.left="0px",e.style.width=`${Math.max(60,t.orientation.y*t.length*60)}px`,e.style.height=`${Math.max(60,t.orientation.x*t.length*60)}px`,e}(t);f.set(e,t);const[n,r]=t.coordinates[0];m.querySelector(`[data-x="${n}"][data-y="${r}"]`).appendChild(e)}));for(const t of f.keys())t.addEventListener("mousedown",H),t.addEventListener("mouseup",C),t.addEventListener("mouseup",w);document.addEventListener("mousemove",M),m.addEventListener("contextmenu",(t=>t.preventDefault()))}(D),F.removeEventListener("click",$),p("Drag & Drop Ships. Right Click to Rotate")}function X(){return D.gameboardHandler.areShipsSunk()?T=P:P.gameboardHandler.areShipsSunk()&&(T=D),null!==T&&p(`${T.name} wins!`),null!==T}A.addEventListener("click",(function(t){A.classList.contains("start")?(T=null,function(){for(const t of f.keys())t.removeEventListener("mousedown",H),t.removeEventListener("mouseup",C),t.removeEventListener("mouseup",w)}(),F.addEventListener("click",$),p(""),A.textContent="New Game"):(I(),A.textContent="Play"),A.classList.toggle("start")})),I()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENFWEdDLENBQWVYLEdBQ0NsRCxFRE1IOEQsb0JBQW9CLFFBQVNwRSxHQ0wxQzdELEVBQVksMkNBQ2YsQ0F3QkEsU0FBUytELElBV04sT0FWSXNELEVBQU1wRCxpQkFBaUIwQixlQUN4QjJCLEVBQVN0RCxFQUNEQSxFQUFTQyxpQkFBaUIwQixpQkFDbEMyQixFQUFTRCxHQUdHLE9BQVhDLEdBQ0R0SCxFQUFZLEdBQUdzSCxFQUFPcEssY0FHUCxPQUFYb0ssQ0FDVixDRHBERzFELEVBQVdrRSxpQkFBaUIsU0FHL0IsU0FBNEJqSCxHQUNyQitDLEVBQVdyRSxVQUFVTSxTQUFTLFVDZWxDeUgsRUFBUyxLRk9aLFdBQ0ksSUFBSyxNQUFNL0YsS0FBaUJuQixFQUFPeUgsT0FDaEN0RyxFQUFjMEcsb0JBQW9CLFlBQWFySCxHQUMvQ1csRUFBYzBHLG9CQUFvQixVQUFXOUcsR0FDN0NJLEVBQWMwRyxvQkFBb0IsVUFBV2xGLEVBRXBELENFWkdtRixHQUNlL0QsRURMRjJELGlCQUFpQixRQUFTakUsR0NNdkM3RCxFQUFZLElEaEJUNEQsRUFBVzFELFlBQWMsYUFFekJxSCxJQUNBM0QsRUFBVzFELFlBQWMsUUFHNUIwRCxFQUFXckUsVUFBVTRJLE9BQU8sUUFDL0IsSU1kQVosRyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3NoaXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvZG9tLmpzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL2RyYWdfZHJvcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9nYW1lVUkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvZ2FtZUNvbnRvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9zaGlwUGxhY2VtZW50SGFuZGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvcGxheWVyLmpzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL2NvbXB1dGVyQUkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFNoaXAge1xuICAgY29uc3RydWN0b3IobmFtZSwgbGVuZ3RoKSB7XG4gICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICB0aGlzLmhlYWx0aCA9IGxlbmd0aDtcbiAgICAgIHRoaXMuY29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIHRoaXMub3JpZW50YXRpb24gPSBudWxsO1xuICAgfVxuXG4gICBoaXQoKSB7XG4gICAgICB0aGlzLmhlYWx0aCAtPSAxO1xuICAgfVxuXG4gICBpc1N1bmsoKSB7XG4gICAgICByZXR1cm4gdGhpcy5oZWFsdGggPT09IDA7XG4gICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNoaXA7XG4iLCJpbXBvcnQgU2hpcCBmcm9tICcuL3NoaXAnO1xuXG5jb25zdCBob3Jpem9udGFsID0ge1xuICAgeDogMCxcbiAgIHk6IDFcbn07XG5cbmNvbnN0IHZlcnRpY2FsID0ge1xuICAgeDogMSxcbiAgIHk6IDBcbn07XG5cbmNvbnN0IGRpcnMgPSBbaG9yaXpvbnRhbCwgdmVydGljYWxdO1xuXG5mdW5jdGlvbiBzZWxlY3RSYW5kb20oYXJyYXkpIHtcbiAgIGNvbnN0IHJhbmRvbU51bSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFycmF5Lmxlbmd0aCk7XG4gICByZXR1cm4gYXJyYXlbcmFuZG9tTnVtXTtcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZG9tRGlyZWN0aW9uKCkge1xuICAgcmV0dXJuIHNlbGVjdFJhbmRvbShkaXJzKTtcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZG9tRW1wdHlDZWxsKGJvYXJkKSB7XG4gICBjb25zdCBlbXB0eUNlbGxzID0gW107XG5cbiAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9hcmQubGVuZ3RoOyArK2kpIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYm9hcmQubGVuZ3RoOyArK2opIHtcbiAgICAgICAgIGlmIChib2FyZFtpXVtqXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgZW1wdHlDZWxscy5wdXNoKFtpLCBqXSk7XG4gICAgICAgICB9XG4gICAgICB9XG4gICB9XG5cbiAgIHJldHVybiBzZWxlY3RSYW5kb20oZW1wdHlDZWxscyk7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlU2hpcHMoKSB7XG4gICBjb25zdCBTaGlwcyA9IFtcbiAgICAgIG5ldyBTaGlwKCdIeWRyYScsIDUpLFxuICAgICAgbmV3IFNoaXAoJ1BlZ2FzdXMnLCA0KSxcbiAgICAgIG5ldyBTaGlwKCdPcmlvbicsIDMpLFxuICAgICAgbmV3IFNoaXAoJ1Njb3JwaXVzJywgMiksXG4gICAgICBuZXcgU2hpcCgnTGVvJywgMSlcbiAgIF07XG5cbiAgIHJldHVybiBTaGlwcztcbn1cblxuZnVuY3Rpb24gZ2V0UmFuZG9tQ29sb3IoKSB7XG4gICBjb25zdCBjb2xvciA9IGByZ2JhKCR7TWF0aC5yYW5kb20oKSAqIDI1NX0sICR7TWF0aC5yYW5kb20oKSAqIDI1NX0sICR7XG4gICAgICBNYXRoLnJhbmRvbSgpICogMjU1XG4gICB9LCAkezAuNX0pYDtcblxuICAgcmV0dXJuIGNvbG9yO1xufVxuXG5mdW5jdGlvbiBjaGVja0JvdW5kKFt4LCB5XSwgYm9hcmQpIHtcbiAgIHJldHVybiB4ID49IDAgJiYgeCA8IGJvYXJkLmxlbmd0aCAmJiB5ID49IDAgJiYgeSA8IGJvYXJkLmxlbmd0aDtcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlU2NvcmUoYm9hcmQpe1xuICAgY29uc29sZS5sb2coYm9hcmQpO1xuICAgbGV0IG1pc3NDb3VudCA9IDA7XG5cbiAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9hcmQubGVuZ3RoOyArK2kpIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYm9hcmQubGVuZ3RoOyArK2opIHtcbiAgICAgICAgIGlmIChib2FyZFtpXVtqXSA9PT0gJ21pc3MnKSBtaXNzQ291bnQgKz0gMTtcbiAgICAgIH1cbiAgIH1cblxuICAgcmV0dXJuIE1hdGguY2VpbCgoMTUgLyBtaXNzQ291bnQpICogMTAwMDApO1xufVxuXG5leHBvcnQge1xuICAgZ2V0UmFuZG9tRW1wdHlDZWxsLFxuICAgZ2V0UmFuZG9tRGlyZWN0aW9uLFxuICAgZ2VuZXJhdGVTaGlwcyxcbiAgIGdldFJhbmRvbUNvbG9yLFxuICAgY2hlY2tCb3VuZCxcbiAgIGNhbGN1bGF0ZVNjb3JlXG59O1xuIiwiaW1wb3J0IHsgZ2V0UmFuZG9tQ29sb3IgfSBmcm9tICcuL3V0aWxzJztcblxuY29uc3QgcGxheWVyQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheWVyJyk7XG5jb25zdCBjb21wdXRlckJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbXB1dGVyJyk7XG5jb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2UnKTtcblxuY29uc3QgZ3JpZFNpemUgPSA4O1xuXG5mdW5jdGlvbiBjcmVhdGVCb2FyZERpc3BsYXkoKSB7XG4gICBjcmVhdGVHcmlkKHBsYXllckJvYXJkKTtcbiAgIGNyZWF0ZUdyaWQoY29tcHV0ZXJCb2FyZCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUdyaWQoY29udGFpbmVyKSB7XG4gICBjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncmlkU2l6ZTsgKytpKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdyaWRTaXplOyArK2opIHtcbiAgICAgICAgIGNvbnN0IGNlbGwgPSBjcmVhdGVDZWxsKGksIGopO1xuICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNlbGwpO1xuICAgICAgfVxuICAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVDZWxsKGksIGopIHtcbiAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnY2VsbCcpO1xuICAgY2VsbC5kYXRhc2V0LnggPSBpO1xuICAgY2VsbC5kYXRhc2V0LnkgPSBqO1xuXG4gICByZXR1cm4gY2VsbDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2hpcENvbXBvbmVudChzaGlwKSB7XG4gICBjb25zdCBjZWxsU2l6ZSA9IDYwO1xuICAgY29uc3Qgc2hpcENvbXBvbmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICBzaGlwQ29tcG9uZW50LmNsYXNzTGlzdC5hZGQoJ3NoaXAnLCBzaGlwLm5hbWUpO1xuICAgc2hpcENvbXBvbmVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBnZXRSYW5kb21Db2xvcigpO1xuICAgc2hpcENvbXBvbmVudC5zdHlsZS50b3AgPSAnMHB4JztcbiAgIHNoaXBDb21wb25lbnQuc3R5bGUubGVmdCA9ICcwcHgnO1xuICAgc2hpcENvbXBvbmVudC5zdHlsZS53aWR0aCA9IGAke01hdGgubWF4KFxuICAgICAgY2VsbFNpemUsXG4gICAgICBzaGlwLm9yaWVudGF0aW9uLnkgKiBzaGlwLmxlbmd0aCAqIGNlbGxTaXplXG4gICApfXB4YDtcbiAgIHNoaXBDb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7TWF0aC5tYXgoXG4gICAgICBjZWxsU2l6ZSxcbiAgICAgIHNoaXAub3JpZW50YXRpb24ueCAqIHNoaXAubGVuZ3RoICogY2VsbFNpemVcbiAgICl9cHhgO1xuXG4gICByZXR1cm4gc2hpcENvbXBvbmVudDtcbn1cblxuZnVuY3Rpb24gbWFya0NlbGwoe2NlbGwsIGhpdH0sIGJvYXJkRGlzcGxheSl7XG4gICBjb25zdCBncmlkQ2VsbCA9IGJvYXJkRGlzcGxheS5xdWVyeVNlbGVjdG9yKGBbZGF0YS14PVwiJHtjZWxsWzBdfVwiXVtkYXRhLXk9XCIke2NlbGxbMV19XCJdYCk7XG4gICBcbiAgIGlmKGdyaWRDZWxsLmNsYXNzTGlzdC5jb250YWlucygnaGl0JykpIHJldHVybiBudWxsO1xuXG4gICBncmlkQ2VsbC5jbGFzc0xpc3QuYWRkKCdoaXQnKTtcbiAgIGlmKGhpdCkgZ3JpZENlbGwuY2xhc3NMaXN0LmFkZCgnc3VjY2VzcycpO1xuICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICBlbC5pbm5lckhUTUwgPSAnJnRpbWVzOydcbiAgIGdyaWRDZWxsLnByZXBlbmQoZWwpO1xufVxuXG5mdW5jdGlvbiBzaG93TWVzc2FnZShtZXNzYWdlKXtcbiAgIG1lc3NhZ2VDb250YWluZXIudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xufVxuXG5leHBvcnQgeyBjcmVhdGVCb2FyZERpc3BsYXksIGNyZWF0ZVNoaXBDb21wb25lbnQsIG1hcmtDZWxsLCBzaG93TWVzc2FnZSB9O1xuIiwiaW1wb3J0IHsgZ2V0UmFuZG9tQ29sb3IgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IGNyZWF0ZVNoaXBDb21wb25lbnQgfSBmcm9tICcuL2RvbSc7XG5cbmxldCBwbGF5ZXJCb2FyZCA9IG51bGw7XG5sZXQgQ2VsbHMgPSBudWxsO1xuY29uc3QgbWFwcGVyID0gbmV3IE1hcCgpO1xuXG5sZXQgYm9hcmRIYW5kbGVyID0gbnVsbDtcbmxldCBjdXJyU2hpcCA9IG51bGw7XG5sZXQgaW5pdGlhbFggPSBudWxsO1xubGV0IGluaXRpYWxZID0gbnVsbDtcbmxldCBpc2RyYWdnaW5nID0gZmFsc2U7XG5sZXQgc3RhcnRDZWxsID0gbnVsbDtcblxuZnVuY3Rpb24gZW5hYmxlRHJhZ0Ryb3AocGxheWVyKSB7XG4gICBwbGF5ZXJCb2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXInKTtcbiAgIENlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBsYXllciAuY2VsbCcpO1xuXG4gICBib2FyZEhhbmRsZXIgPSBwbGF5ZXIuZ2FtZWJvYXJkSGFuZGxlcjtcbiAgIGluaXRTaGlwQ29tcG9uZW50cyhib2FyZEhhbmRsZXIuZ2V0U2hpcHMoKSk7XG5cbiAgIGZvciAoY29uc3Qgc2hpcENvbXBvbmVudCBvZiBtYXBwZXIua2V5cygpKSB7XG4gICAgICBzaGlwQ29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZURyYWdTdGFydCk7XG4gICAgICBzaGlwQ29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVEcmFnRW5kKTtcbiAgICAgIHNoaXBDb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHJvdGF0ZVNoaXApO1xuICAgfVxuXG4gICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVEcmFnZ2luZyk7XG4gICBwbGF5ZXJCb2FyZC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xufVxuXG5mdW5jdGlvbiBkaXNhYmxlRHJhZ0Ryb3AoKXtcbiAgICBmb3IgKGNvbnN0IHNoaXBDb21wb25lbnQgb2YgbWFwcGVyLmtleXMoKSkge1xuICAgICAgIHNoaXBDb21wb25lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICAgICBzaGlwQ29tcG9uZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVEcmFnRW5kKTtcbiAgICAgICBzaGlwQ29tcG9uZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCByb3RhdGVTaGlwKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGluaXRTaGlwQ29tcG9uZW50cyhTaGlwcykge1xuICAgbWFwcGVyLmNsZWFyKCk7XG5cbiAgIFNoaXBzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIGNvbnN0IHNoaXBDb21wb25lbnQgPSBjcmVhdGVTaGlwQ29tcG9uZW50KHNoaXApO1xuICAgICAgbWFwcGVyLnNldChzaGlwQ29tcG9uZW50LCBzaGlwKTtcbiAgICAgIGNvbnN0IFt4LCB5XSA9IHNoaXAuY29vcmRpbmF0ZXNbMF07XG4gICAgICBjb25zdCBjZWxsID0gcGxheWVyQm9hcmQucXVlcnlTZWxlY3RvcihgW2RhdGEteD1cIiR7eH1cIl1bZGF0YS15PVwiJHt5fVwiXWApO1xuICAgICAgY2VsbC5hcHBlbmRDaGlsZChzaGlwQ29tcG9uZW50KTtcbiAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVEcmFnU3RhcnQoZSkge1xuICAgY3VyclNoaXAgPSBlLnRhcmdldDtcbiAgIGN1cnJTaGlwLmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyk7XG4gICBjdXJyU2hpcC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnYmFja2dyb3VuZC1jb2xvcicpO1xuICAgXG4gICBpc2RyYWdnaW5nID0gdHJ1ZTtcbiAgIGluaXRpYWxYID0gZS5jbGllbnRYO1xuICAgaW5pdGlhbFkgPSBlLmNsaWVudFk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURyYWdFbmQoZSkge1xuICAgaWYgKGlzZHJhZ2dpbmcpIHtcbiAgICAgIGN1cnJTaGlwLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWdnaW5nJyk7XG4gICAgICBjdXJyU2hpcC5jbGFzc0xpc3QucmVtb3ZlKCdub3RwbGFjZWFibGUnKTtcbiAgICAgIGN1cnJTaGlwLnN0eWxlLmxlZnQgPSAnMHB4JztcbiAgICAgIGN1cnJTaGlwLnN0eWxlLnRvcCA9ICcwcHgnO1xuXG4gICAgICBjb25zdCBjZWxsID0gc3RhcnRDZWxsO1xuICAgICAgaWYgKCFjZWxsIHx8ICFpc1BsYWNlYWJsZShjZWxsLCBjdXJyU2hpcCkpIHtcbiAgICAgICAgIGNvbnN0IHNoaXAgPSBtYXBwZXIuZ2V0KGN1cnJTaGlwKTtcbiAgICAgICAgIGJvYXJkSGFuZGxlci5wbGFjZVNoaXBBdChzaGlwLCBzaGlwLmNvb3JkaW5hdGVzWzBdLCBzaGlwLm9yaWVudGF0aW9uKTsgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgY2VsbC5hcHBlbmRDaGlsZChjdXJyU2hpcCk7XG4gICAgICB9XG4gICB9XG5cbiAgIGlzZHJhZ2dpbmcgPSBmYWxzZTtcbiAgIGN1cnJTaGlwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGdldFJhbmRvbUNvbG9yKCk7XG4gICBjbGVhckhpZ2hsaWdodCgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVEcmFnZ2luZyhlKSB7XG4gICBpZiAoaXNkcmFnZ2luZykge1xuICAgICAgYm9hcmRIYW5kbGVyLnJlbW92ZVNoaXAobWFwcGVyLmdldChjdXJyU2hpcCkpO1xuXG4gICAgICBjdXJyU2hpcC5zdHlsZS5sZWZ0ID0gYCR7ZS5jbGllbnRYIC0gaW5pdGlhbFh9cHhgO1xuICAgICAgY3VyclNoaXAuc3R5bGUudG9wID0gYCR7ZS5jbGllbnRZIC0gaW5pdGlhbFl9cHhgO1xuXG4gICAgICBpZiAoc3RhcnRDZWxsICE9PSBmaW5kU3RhcnRDZWxsKCkpIHtcbiAgICAgICAgIGNsZWFySGlnaGxpZ2h0KCk7XG4gICAgICB9XG5cbiAgICAgIHN0YXJ0Q2VsbCA9IGZpbmRTdGFydENlbGwoKTtcbiAgICAgIGhpZ2hsaWdodENlbGxzKHN0YXJ0Q2VsbCk7XG4gICB9XG59XG5cbmZ1bmN0aW9uIHJvdGF0ZVNoaXAoZSkge1xuICAgaWYgKGUuYnV0dG9uID09PSAyKSB7XG4gICAgICBjb25zdCBjZWxsU2l6ZSA9IDYwO1xuICAgICAgY29uc3Qgc2hpcENvbXBvbmVudCA9IGUudGFyZ2V0O1xuICAgICAgY29uc3Qgc2hpcCA9IG1hcHBlci5nZXQoc2hpcENvbXBvbmVudCk7XG4gICAgICBjb25zdCBuZXdkaXIgPSB7XG4gICAgICAgICB4OiAxIC0gc2hpcC5vcmllbnRhdGlvbi54LFxuICAgICAgICAgeTogMSAtIHNoaXAub3JpZW50YXRpb24ueVxuICAgICAgfTtcblxuICAgICAgYm9hcmRIYW5kbGVyLnBsYWNlU2hpcEF0KHNoaXAsIHNoaXAuY29vcmRpbmF0ZXNbMF0sIG5ld2Rpcik7XG5cbiAgICAgIHNoaXBDb21wb25lbnQuc3R5bGUud2lkdGggPSBgJHtNYXRoLm1heChcbiAgICAgICAgIGNlbGxTaXplLFxuICAgICAgICAgc2hpcC5vcmllbnRhdGlvbi55ICogc2hpcC5sZW5ndGggKiBjZWxsU2l6ZVxuICAgICAgKX1weGA7XG4gICAgICBzaGlwQ29tcG9uZW50LnN0eWxlLmhlaWdodCA9IGAke01hdGgubWF4KFxuICAgICAgICAgY2VsbFNpemUsXG4gICAgICAgICBzaGlwLm9yaWVudGF0aW9uLnggKiBzaGlwLmxlbmd0aCAqIGNlbGxTaXplXG4gICAgICApfXB4YDtcbiAgIH1cbn1cblxuZnVuY3Rpb24gZmluZFN0YXJ0Q2VsbCgpIHtcbiAgIGxldCBtaW5EaXN0ID0gSW5maW5pdHk7XG4gICBjb25zdCBtYXhNaW5EaXN0ID0gNjA7XG5cbiAgIENlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICAgIGNvbnN0IGRpc3QgPVxuICAgICAgICAgTWF0aC5hYnMoXG4gICAgICAgICAgICBjZWxsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnggLSBjdXJyU2hpcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS54XG4gICAgICAgICApICtcbiAgICAgICAgIE1hdGguYWJzKFxuICAgICAgICAgICAgY2VsbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS55IC0gY3VyclNoaXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueVxuICAgICAgICAgKTtcbiAgICAgIGlmIChkaXN0IDwgbWluRGlzdCkge1xuICAgICAgICAgc3RhcnRDZWxsID0gY2VsbDtcbiAgICAgICAgIG1pbkRpc3QgPSBkaXN0O1xuICAgICAgfVxuICAgfSk7XG5cbiAgIGlmIChtaW5EaXN0ID4gbWF4TWluRGlzdCkgcmV0dXJuIG51bGw7XG5cbiAgIHJldHVybiBzdGFydENlbGw7XG59XG5cbmZ1bmN0aW9uIGlzUGxhY2VhYmxlKGNlbGwsIHNoaXBDb21wb25lbnQpIHtcbiAgIGNvbnN0IHN0cnRDZWxsID0gW051bWJlcihjZWxsLmRhdGFzZXQueCksIE51bWJlcihjZWxsLmRhdGFzZXQueSldO1xuICAgY29uc3Qgc2hpcCA9IG1hcHBlci5nZXQoc2hpcENvbXBvbmVudCk7XG4gICByZXR1cm4gYm9hcmRIYW5kbGVyLnBsYWNlU2hpcEF0KHNoaXAsIHN0cnRDZWxsLCBzaGlwLm9yaWVudGF0aW9uKTtcbn1cblxuZnVuY3Rpb24gaGlnaGxpZ2h0Q2VsbHMoY2VsbCkge1xuICAgaWYgKGNlbGwpIHtcbiAgICAgIGNvbnN0IHJlcWxlbmd0aCA9IG1hcHBlci5nZXQoY3VyclNoaXApLmxlbmd0aDtcbiAgICAgIGNvbnN0IG5lYXJieUNlbGxzID0gZ2V0TmVhcmJ5Q2VsbHMoY2VsbCwgcmVxbGVuZ3RoKTtcblxuICAgICAgaWYgKG5lYXJieUNlbGxzLmxlbmd0aCA9PT0gcmVxbGVuZ3RoKSB7XG4gICAgICAgICBuZWFyYnlDZWxscy5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0Jyk7XG4gICAgICAgICB9KTtcbiAgICAgICAgIGN1cnJTaGlwLmNsYXNzTGlzdC5yZW1vdmUoJ25vdHBsYWNlYWJsZScpO1xuICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgfVxuXG4gICBjdXJyU2hpcC5jbGFzc0xpc3QuYWRkKCdub3RwbGFjZWFibGUnKTtcbn1cblxuZnVuY3Rpb24gZ2V0TmVhcmJ5Q2VsbHMoY2VsbCwgbGVuZ3RoKSB7XG4gICBjb25zdCBjZWxsTGlzdCA9IFtdO1xuXG4gICBpZiAoIWNlbGwpIHJldHVybiBjZWxsTGlzdDtcblxuICAgY29uc3Qgc3RydHggPSBOdW1iZXIoY2VsbC5kYXRhc2V0LngpO1xuICAgY29uc3Qgc3RydHkgPSBOdW1iZXIoY2VsbC5kYXRhc2V0LnkpO1xuICAgY29uc3QgY3VyckRpciA9IG1hcHBlci5nZXQoY3VyclNoaXApLm9yaWVudGF0aW9uO1xuXG4gICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCBueCA9IHN0cnR4ICsgaSAqIGN1cnJEaXIueDtcbiAgICAgIGNvbnN0IG55ID0gc3RydHkgKyBpICogY3VyckRpci55O1xuXG4gICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXg9XCIke254fVwiXVtkYXRhLXk9XCIke255fVwiXWApO1xuICAgICAgaWYgKGVsICYmIGJvYXJkSGFuZGxlci5nZXRCb2FyZCgpW254XVtueV0gPT09IG51bGwpIGNlbGxMaXN0LnB1c2goZWwpO1xuICAgfVxuXG4gICByZXR1cm4gY2VsbExpc3Q7XG59XG5cbmZ1bmN0aW9uIGNsZWFySGlnaGxpZ2h0KCkge1xuICAgY29uc3QgaGlnaGxpZ2h0ZWRDZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oaWdobGlnaHQnKTtcbiAgIGhpZ2hsaWdodGVkQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHQnKTtcbiAgIH0pO1xufVxuXG5leHBvcnQgeyBlbmFibGVEcmFnRHJvcCwgZGlzYWJsZURyYWdEcm9wIH07XG4iLCJpbXBvcnQgeyBwbGF5Um91bmQsIGluaXRpYWxpemVHYW1lLCBzdGFydEdhbWUgfSBmcm9tICcuL2dhbWVDb250b2xsZXInO1xuXG5jb25zdCBtYWluQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4nKTtcblxuZnVuY3Rpb24gaW5pdFVJKCkge1xuICAgbWFpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZU1haW5CdG5DbGljayk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU1haW5CdG5DbGljayhlKSB7XG4gICBpZiAobWFpbkJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3N0YXJ0JykpIHtcbiAgICAgIHN0YXJ0R2FtZSgpO1xuICAgICAgbWFpbkJ1dHRvbi50ZXh0Q29udGVudCA9ICdOZXcgR2FtZSc7XG4gICB9IGVsc2Uge1xuICAgICAgaW5pdGlhbGl6ZUdhbWUoKTtcbiAgICAgIG1haW5CdXR0b24udGV4dENvbnRlbnQgPSAnUGxheSc7XG4gICB9XG5cbiAgIG1haW5CdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnc3RhcnQnKTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlQXR0YWNrVUkoYm9hcmREaXNwbGF5KSB7XG4gICBib2FyZERpc3BsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhdHRhY2tDZWxsKTtcbn1cblxuZnVuY3Rpb24gZGlzYWJsZUF0dGFja1VJKGJvYXJkRGlzcGxheSkge1xuICAgYm9hcmREaXNwbGF5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXR0YWNrQ2VsbCk7XG59XG5cbmZ1bmN0aW9uIGF0dGFja0NlbGwoZSkge1xuICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGl0JykpIHJldHVybjtcbiAgIFxuICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2VsbCcpKSB7XG4gICAgICBjb25zdCB4ID0gZS50YXJnZXQuZGF0YXNldC54O1xuICAgICAgY29uc3QgeSA9IGUudGFyZ2V0LmRhdGFzZXQueTtcblxuICAgICAgcGxheVJvdW5kKFt4LCB5XSk7XG4gICB9XG59XG5cbmV4cG9ydCB7IGVuYWJsZUF0dGFja1VJLCBkaXNhYmxlQXR0YWNrVUksIGluaXRVSSB9O1xuIiwiaW1wb3J0IHsgY3JlYXRlQm9hcmREaXNwbGF5LCBtYXJrQ2VsbCwgc2hvd01lc3NhZ2UgfSBmcm9tICcuL2RvbSc7XG5pbXBvcnQgeyBlbmFibGVEcmFnRHJvcCwgZGlzYWJsZURyYWdEcm9wIH0gZnJvbSAnLi9kcmFnX2Ryb3AnO1xuaW1wb3J0IHsgZW5hYmxlQXR0YWNrVUksIGRpc2FibGVBdHRhY2tVSSB9IGZyb20gJy4vZ2FtZVVJJztcbmltcG9ydCBQbGF5ZXIgZnJvbSAnLi9wbGF5ZXInO1xuaW1wb3J0IEFJIGZyb20gJy4vY29tcHV0ZXJBSSc7XG5cbmxldCBodW1hbiA9IG51bGw7XG5sZXQgY29tcHV0ZXIgPSBudWxsO1xubGV0IHdpbm5lciA9IG51bGw7XG5cbmxldCBwbGF5ZXJCb2FyZERpc3BsYXkgPSBudWxsO1xubGV0IGNvbXB1dGVyQm9hcmREaXNwbGF5ID0gbnVsbDtcblxuZnVuY3Rpb24gaW5pdGlhbGl6ZUdhbWUoKSB7XG4gICBjcmVhdGVCb2FyZERpc3BsYXkoKTtcbiAgIGNyZWF0ZVBsYXllcnMoKTtcbiAgIHBsYXllckJvYXJkRGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXInKTtcbiAgIGNvbXB1dGVyQm9hcmREaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbXB1dGVyJyk7XG4gICBlbmFibGVEcmFnRHJvcChodW1hbik7XG4gICBkaXNhYmxlQXR0YWNrVUkoY29tcHV0ZXJCb2FyZERpc3BsYXkpO1xuICAgc2hvd01lc3NhZ2UoJ0RyYWcgJiBEcm9wIFNoaXBzLiBSaWdodCBDbGljayB0byBSb3RhdGUnKTtcbn1cblxuZnVuY3Rpb24gc3RhcnRHYW1lKCkge1xuICAgd2lubmVyID0gbnVsbDtcbiAgIGRpc2FibGVEcmFnRHJvcCgpO1xuICAgZW5hYmxlQXR0YWNrVUkoY29tcHV0ZXJCb2FyZERpc3BsYXkpO1xuICAgc2hvd01lc3NhZ2UoJycpO1xufVxuXG5mdW5jdGlvbiBwbGF5Um91bmQocGxheWVyU2VsZWN0aW9uKSB7XG4gICBpZiAoaXNHYW1lT3ZlcigpKSByZXR1cm4gbnVsbDtcblxuICAgY29uc3QgaXNIaXQgPSBjb21wdXRlci5nYW1lYm9hcmRIYW5kbGVyLnJlY2VpdmVBdHRhY2socGxheWVyU2VsZWN0aW9uKTtcbiAgIFxuICAgbWFya0NlbGwoeyBjZWxsOiBwbGF5ZXJTZWxlY3Rpb24sIGhpdDogaXNIaXQgfSwgY29tcHV0ZXJCb2FyZERpc3BsYXkpO1xuXG4gICBpZiAoaXNHYW1lT3ZlcigpKSByZXR1cm4gbnVsbDtcblxuICAgY29uc3QgcmVzcG9uc2UgPSBjb21wdXRlci5BSS5wbGF5TW92ZSgpO1xuICAgbWFya0NlbGwocmVzcG9uc2UsIHBsYXllckJvYXJkRGlzcGxheSk7XG5cbiAgIGlmIChpc0dhbWVPdmVyKCkpIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBpc0dhbWVPdmVyKCkge1xuICAgaWYgKGh1bWFuLmdhbWVib2FyZEhhbmRsZXIuYXJlU2hpcHNTdW5rKCkpIHtcbiAgICAgIHdpbm5lciA9IGNvbXB1dGVyO1xuICAgfSBlbHNlIGlmIChjb21wdXRlci5nYW1lYm9hcmRIYW5kbGVyLmFyZVNoaXBzU3VuaygpKSB7XG4gICAgICB3aW5uZXIgPSBodW1hbjtcbiAgIH1cblxuICAgaWYgKHdpbm5lciAhPT0gbnVsbCkge1xuICAgICAgc2hvd01lc3NhZ2UoYCR7d2lubmVyLm5hbWV9IHdpbnMhYCk7XG4gICB9XG5cbiAgIHJldHVybiB3aW5uZXIgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVBsYXllcnMoKSB7XG4gICBodW1hbiA9IG5ldyBQbGF5ZXIoJ0h1bWFuJyk7XG4gICBjb21wdXRlciA9IG5ldyBQbGF5ZXIoJ0NvbXB1dGVyJyk7XG4gICBjb21wdXRlci5BSSA9IG5ldyBBSShcbiAgICAgIGh1bWFuLmdhbWVib2FyZEhhbmRsZXIucmVjZWl2ZUF0dGFjay5iaW5kKGh1bWFuLmdhbWVib2FyZEhhbmRsZXIpXG4gICApO1xufVxuXG5leHBvcnQgeyBwbGF5Um91bmQsIGluaXRpYWxpemVHYW1lLCBzdGFydEdhbWUgfTtcbiIsImltcG9ydCB7IGdldFJhbmRvbUVtcHR5Q2VsbCwgZ2V0UmFuZG9tRGlyZWN0aW9uLCBjaGVja0JvdW5kIH0gZnJvbSAnLi91dGlscyc7XG5cbmNsYXNzIFBsYWNlbWVudEhhbmRsZXIge1xuICAgc3RhdGljIHBsYWNlUmFuZG9tKFNoaXBzLCBib2FyZCkge1xuICAgICAgY29uc3QgcXVldWUgPSBbLi4uU2hpcHNdO1xuXG4gICAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgY29uc3Qgc2hpcCA9IHF1ZXVlLnNoaWZ0KCk7XG5cbiAgICAgICAgIGNvbnN0IGlzU2hpcFBsYWNlZCA9IHRoaXMudHJ5VG9QbGFjZShzaGlwLCBib2FyZCk7XG5cbiAgICAgICAgIGlmICghaXNTaGlwUGxhY2VkKSBxdWV1ZS5wdXNoKHNoaXApO1xuICAgICAgfVxuICAgfVxuXG4gICBzdGF0aWMgdHJ5VG9QbGFjZShzaGlwLCBib2FyZCwgc3RydENlbGwsIGRpcikge1xuICAgICAgc3RydENlbGwgPSBzdHJ0Q2VsbCB8fCBnZXRSYW5kb21FbXB0eUNlbGwoYm9hcmQpO1xuICAgICAgZGlyID0gZGlyIHx8IGdldFJhbmRvbURpcmVjdGlvbigpO1xuXG4gICAgICB0aGlzLnJlbW92ZVNoaXBGcm9tQm9hcmQoc2hpcCwgYm9hcmQpO1xuXG4gICAgICBjb25zdCBuZXdDb29yZHMgPSB0aGlzLiNnZXROZXdDb29yZGluYXRlcyhcbiAgICAgICAgIHNoaXAubGVuZ3RoLFxuICAgICAgICAgc3RydENlbGwsXG4gICAgICAgICBib2FyZCxcbiAgICAgICAgIGRpclxuICAgICAgKTtcblxuICAgICAgaWYgKG5ld0Nvb3Jkcy5sZW5ndGggPCBzaGlwLmxlbmd0aCkge1xuICAgICAgICAgc2hpcC5jb29yZGluYXRlcy5mb3JFYWNoKChbeCwgeV0pID0+IChib2FyZFt4XVt5XSA9IHNoaXApKTtcbiAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgc2hpcC5jb29yZGluYXRlcyA9IG5ld0Nvb3JkcztcbiAgICAgIHNoaXAub3JpZW50YXRpb24gPSBkaXI7XG4gICAgICBuZXdDb29yZHMuZm9yRWFjaCgoW3gsIHldKSA9PiAoYm9hcmRbeF1beV0gPSBzaGlwKSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgIH1cblxuICAgc3RhdGljICNnZXROZXdDb29yZGluYXRlcyhsZW5ndGgsIHN0cnRDZWxsLCBib2FyZCwgZGlyKSB7XG4gICAgICBjb25zdCBjZWxscyA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICBjb25zdCBwb3NYID0gc3RydENlbGxbMF0gKyBpICogZGlyLng7XG4gICAgICAgICBjb25zdCBwb3NZID0gc3RydENlbGxbMV0gKyBpICogZGlyLnk7XG5cbiAgICAgICAgIGlmIChjaGVja0JvdW5kKFtwb3NYLCBwb3NZXSwgYm9hcmQpICYmIGJvYXJkW3Bvc1hdW3Bvc1ldID09PSBudWxsKSB7XG4gICAgICAgICAgICBjZWxscy5wdXNoKFtwb3NYLCBwb3NZXSk7XG4gICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjZWxscztcbiAgIH1cblxuICAgc3RhdGljIHJlbW92ZVNoaXBGcm9tQm9hcmQoc2hpcCwgYm9hcmQpIHtcbiAgICAgIHNoaXAuY29vcmRpbmF0ZXMuZm9yRWFjaCgoW3gsIHldKSA9PiB7XG4gICAgICAgICBib2FyZFt4XVt5XSA9IG51bGw7XG4gICAgICB9KTtcbiAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGxhY2VtZW50SGFuZGxlcjtcbiIsImltcG9ydCBQbGFjZW1lbnRIYW5kbGVyIGZyb20gJy4vc2hpcFBsYWNlbWVudEhhbmRsZXInO1xuaW1wb3J0IHsgZ2VuZXJhdGVTaGlwcyB9IGZyb20gJy4vdXRpbHMnO1xuXG5jbGFzcyBHYW1lQm9hcmRIYW5kbGVyIHtcbiAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgdGhpcy5ib2FyZFNpemUgPSA4O1xuICAgICAgdGhpcy5TaGlwcyA9IGdlbmVyYXRlU2hpcHMoKTtcbiAgICAgIHRoaXMuYm9hcmQgPSB0aGlzLmNyZWF0ZWJvYXJkKHRoaXMuYm9hcmRTaXplKTtcbiAgICAgIHRoaXMuYm9hcmRMb2cgPSB0aGlzLmNyZWF0ZWJvYXJkKHRoaXMuYm9hcmRTaXplKTtcbiAgICAgIHRoaXMucGxhY2VTaGlwc1JhbmRvbWx5KCk7XG4gICB9XG5cbiAgIGNyZWF0ZWJvYXJkKHNpemUpIHtcbiAgICAgIHJldHVybiBuZXcgQXJyYXkoc2l6ZSkuZmlsbChudWxsKS5tYXAoKCkgPT4gbmV3IEFycmF5KHNpemUpLmZpbGwobnVsbCkpO1xuICAgfVxuXG4gICBwbGFjZVNoaXBzUmFuZG9tbHkoKSB7XG4gICAgICBQbGFjZW1lbnRIYW5kbGVyLnBsYWNlUmFuZG9tKHRoaXMuU2hpcHMsIHRoaXMuYm9hcmQpO1xuICAgfVxuXG4gICBwbGFjZVNoaXBBdChzaGlwLCBzdHJ0Q2VsbCwgZGlyKSB7XG4gICAgICByZXR1cm4gUGxhY2VtZW50SGFuZGxlci50cnlUb1BsYWNlKHNoaXAsIHRoaXMuYm9hcmQsIHN0cnRDZWxsLCBkaXIpO1xuICAgfVxuXG4gICByZW1vdmVTaGlwKHNoaXApIHtcbiAgICAgIFBsYWNlbWVudEhhbmRsZXIucmVtb3ZlU2hpcEZyb21Cb2FyZChzaGlwLCB0aGlzLmJvYXJkKTtcbiAgIH1cblxuICAgYXJlU2hpcHNTdW5rKCkge1xuICAgICAgcmV0dXJuICF0aGlzLlNoaXBzLnNvbWUoKHNoaXApID0+ICFzaGlwLmlzU3VuaygpKTtcbiAgIH1cblxuICAgcmVjZWl2ZUF0dGFjayhbeCwgeV0pIHtcbiAgICAgIGlmICh0aGlzLmJvYXJkW3hdW3ldID09PSBudWxsKSB7XG4gICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNoaXAgPSB0aGlzLmJvYXJkW3hdW3ldO1xuICAgICAgc2hpcC5oaXQoKTtcbiAgICAgIHRoaXMuYm9hcmRbeF1beV0gPSBudWxsO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICB9XG5cbiAgIGdldFNoaXBzKCkge1xuICAgICAgcmV0dXJuIHRoaXMuU2hpcHM7XG4gICB9XG5cbiAgIGdldEJvYXJkKCkge1xuICAgICAgcmV0dXJuIHRoaXMuYm9hcmQ7XG4gICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdhbWVCb2FyZEhhbmRsZXI7XG4iLCJpbXBvcnQgR2FtZUJvYXJkSGFuZGxlciBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcblxuY2xhc3MgUGxheWVyIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lKXtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5nYW1lYm9hcmRIYW5kbGVyID0gbmV3IEdhbWVCb2FyZEhhbmRsZXIoKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBsYXllcjsiLCJpbXBvcnQgeyBjaGVja0JvdW5kLCBnZXRSYW5kb21FbXB0eUNlbGwgfSBmcm9tICcuL3V0aWxzJztcblxuY2xhc3MgQUkge1xuICAgY29uc3RydWN0b3IoYXR0YWNrZm4pIHtcbiAgICAgIHRoaXMuYm9hcmQgPSB0aGlzLmNyZWF0ZUJvYXJkKDgpO1xuICAgICAgdGhpcy5uZXh0TW92ZXMgPSBbXTtcbiAgICAgIHRoaXMuY3VyckhpdENlbGxzID0gW107XG4gICAgICB0aGlzLmF0dGFja2ZuID0gYXR0YWNrZm47XG4gICB9XG5cbiAgIGNyZWF0ZUJvYXJkKHNpemUpIHtcbiAgICAgIHJldHVybiBuZXcgQXJyYXkoc2l6ZSkuZmlsbChudWxsKS5tYXAoKCkgPT4gbmV3IEFycmF5KHNpemUpLmZpbGwobnVsbCkpO1xuICAgfVxuXG5cbiAgIHBsYXlNb3ZlKCkge1xuICAgICAgaWYgKHRoaXMubmV4dE1vdmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgIHJldHVybiB0aGlzLnBsYXlTbWFydCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5wbGF5UmFuZG9tKCk7XG4gICB9XG5cbiAgIHBsYXlSYW5kb20oKSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IHt9O1xuICAgICAgY29uc3QgY2VsbCA9IGdldFJhbmRvbUVtcHR5Q2VsbCh0aGlzLmJvYXJkKTtcbiAgICAgIHJlc3BvbnNlLmNlbGwgPSBjZWxsO1xuICAgICAgcmVzcG9uc2UuaGl0ID0gZmFsc2U7XG5cbiAgICAgIGlmICh0aGlzLmlzSGl0KGNlbGwpKSB7XG4gICAgICAgICByZXNwb25zZS5oaXQgPSB0cnVlO1xuICAgICAgICAgdGhpcy5jdXJySGl0Q2VsbHMgPSBbXTtcbiAgICAgICAgIHRoaXMuY3VyckhpdENlbGxzLnB1c2goY2VsbCk7XG4gICAgICAgICBjb25zdCBoaXREaXIgPSB0aGlzLmNhbGNIaXREaXJlY3Rpb24oKTtcbiAgICAgICAgIHRoaXMuc2V0TmV4dE1vdmVzKGNlbGwsIGhpdERpcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgIH1cblxuICAgcGxheVNtYXJ0KCkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSB7fTtcbiAgICAgIGNvbnN0IGNlbGwgPSB0aGlzLm5leHRNb3Zlcy5wb3AoKTtcbiAgICAgIHJlc3BvbnNlLmNlbGwgPSBjZWxsO1xuICAgICAgcmVzcG9uc2UuaGl0ID0gZmFsc2U7XG5cbiAgICAgIGlmICh0aGlzLmlzSGl0KGNlbGwpKSB7XG4gICAgICAgICByZXNwb25zZS5oaXQgPSB0cnVlO1xuICAgICAgICAgdGhpcy5jdXJySGl0Q2VsbHMucHVzaChjZWxsKTtcblxuICAgICAgICAgY29uc3QgaGl0RGlyID0gdGhpcy5jYWxjSGl0RGlyZWN0aW9uKCk7XG5cbiAgICAgICAgIGlmICghdGhpcy5zZXROZXh0TW92ZXMoY2VsbCwgaGl0RGlyKSkge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXIoKTtcbiAgICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5jdXJySGl0Q2VsbHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgdGhpcy5jaGFuZ2VEaXIoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgfVxuXG4gICBpc0hpdChbeCwgeV0pIHtcbiAgICAgIHRoaXMuYm9hcmRbeF1beV0gPSAnIyc7XG4gICAgICBjb25zdCByZXNwb25zZSA9IHRoaXMuYXR0YWNrZm4oW3gsIHldKTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgIH1cblxuICAgY2FsY0hpdERpcmVjdGlvbigpIHtcbiAgICAgIGNvbnN0IGxlbiA9IHRoaXMuY3VyckhpdENlbGxzLmxlbmd0aDtcbiAgICAgIGNvbnN0IGRpciA9IFtcbiAgICAgICAgIFswLCAxXSxcbiAgICAgICAgIFsxLCAwXSxcbiAgICAgICAgIFswLCAtMV0sXG4gICAgICAgICBbLTEsIDBdXG4gICAgICBdO1xuXG4gICAgICBpZiAobGVuID4gMSkge1xuICAgICAgICAgY29uc3QgW3gyLCB5Ml0gPSB0aGlzLmN1cnJIaXRDZWxsc1tsZW4gLSAxXTtcbiAgICAgICAgIGNvbnN0IFt4MSwgeTFdID0gdGhpcy5jdXJySGl0Q2VsbHNbbGVuIC0gMl07XG5cbiAgICAgICAgIHJldHVybiBbW3gyIC0geDEsIHkyIC0geTFdXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRpcjtcbiAgIH1cblxuICAgY2hhbmdlRGlyKCkge1xuICAgICAgdGhpcy5jdXJySGl0Q2VsbHMucmV2ZXJzZSgpO1xuXG4gICAgICBjb25zdCByZXZIaXREaXIgPSB0aGlzLmNhbGNIaXREaXJlY3Rpb24oKTtcbiAgICAgIHRoaXMuc2V0TmV4dE1vdmVzKC4uLnRoaXMuY3VyckhpdENlbGxzLnNsaWNlKC0xKSwgcmV2SGl0RGlyKTtcbiAgIH1cblxuICAgc2V0TmV4dE1vdmVzKFt4LCB5XSwgZGlyKSB7XG4gICAgICB0aGlzLm5leHRNb3ZlcyA9IFtdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpci5sZW5ndGg7ICsraSkge1xuICAgICAgICAgY29uc3QgblggPSB4ICsgZGlyW2ldWzBdO1xuICAgICAgICAgY29uc3QgblkgPSB5ICsgZGlyW2ldWzFdO1xuXG4gICAgICAgICBpZiAoY2hlY2tCb3VuZChbblgsIG5ZXSwgdGhpcy5ib2FyZCkgJiYgdGhpcy5ib2FyZFtuWF1bblldID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRNb3Zlcy5wdXNoKFtuWCwgblldKTtcbiAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMubmV4dE1vdmVzLmxlbmd0aCAhPT0gMDtcbiAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQUk7XG4iLCJpbXBvcnQgeyBpbml0aWFsaXplR2FtZSB9IGZyb20gXCIuL21vZHVsZXMvZ2FtZUNvbnRvbGxlclwiO1xuaW1wb3J0IHsgaW5pdFVJIH0gZnJvbSBcIi4vbW9kdWxlcy9nYW1lVUlcIjtcblxuaW5pdFVJKCk7XG5pbml0aWFsaXplR2FtZSgpOyJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsIm5hbWUiLCJsZW5ndGgiLCJ0aGlzIiwiaGVhbHRoIiwiY29vcmRpbmF0ZXMiLCJvcmllbnRhdGlvbiIsImhpdCIsImlzU3VuayIsImRpcnMiLCJ4IiwieSIsInNlbGVjdFJhbmRvbSIsImFycmF5IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZ2V0UmFuZG9tRW1wdHlDZWxsIiwiYm9hcmQiLCJlbXB0eUNlbGxzIiwiaSIsImoiLCJwdXNoIiwiZ2V0UmFuZG9tQ29sb3IiLCJjaGVja0JvdW5kIiwicGxheWVyQm9hcmQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb21wdXRlckJvYXJkIiwibWVzc2FnZUNvbnRhaW5lciIsImdyaWRTaXplIiwiY3JlYXRlR3JpZCIsImNvbnRhaW5lciIsImlubmVySFRNTCIsImNlbGwiLCJjcmVhdGVDZWxsIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiZGF0YXNldCIsIm1hcmtDZWxsIiwiYm9hcmREaXNwbGF5IiwiZ3JpZENlbGwiLCJjb250YWlucyIsImVsIiwicHJlcGVuZCIsInNob3dNZXNzYWdlIiwibWVzc2FnZSIsInRleHRDb250ZW50IiwiQ2VsbHMiLCJtYXBwZXIiLCJNYXAiLCJib2FyZEhhbmRsZXIiLCJjdXJyU2hpcCIsImluaXRpYWxYIiwiaW5pdGlhbFkiLCJpc2RyYWdnaW5nIiwic3RhcnRDZWxsIiwiaGFuZGxlRHJhZ1N0YXJ0IiwiZSIsInRhcmdldCIsInN0eWxlIiwicmVtb3ZlUHJvcGVydHkiLCJjbGllbnRYIiwiY2xpZW50WSIsImhhbmRsZURyYWdFbmQiLCJyZW1vdmUiLCJsZWZ0IiwidG9wIiwic2hpcENvbXBvbmVudCIsInN0cnRDZWxsIiwiTnVtYmVyIiwic2hpcCIsImdldCIsInBsYWNlU2hpcEF0IiwiaXNQbGFjZWFibGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJjbGVhckhpZ2hsaWdodCIsImhhbmRsZURyYWdnaW5nIiwicmVtb3ZlU2hpcCIsImZpbmRTdGFydENlbGwiLCJyZXFsZW5ndGgiLCJuZWFyYnlDZWxscyIsImNlbGxMaXN0Iiwic3RydHgiLCJzdHJ0eSIsImN1cnJEaXIiLCJueCIsIm55IiwiZ2V0Qm9hcmQiLCJnZXROZWFyYnlDZWxscyIsImZvckVhY2giLCJoaWdobGlnaHRDZWxscyIsInJvdGF0ZVNoaXAiLCJidXR0b24iLCJjZWxsU2l6ZSIsIm5ld2RpciIsIndpZHRoIiwibWF4IiwiaGVpZ2h0IiwibWluRGlzdCIsIkluZmluaXR5IiwiZGlzdCIsImFicyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJtYWluQnV0dG9uIiwiYXR0YWNrQ2VsbCIsInBsYXllclNlbGVjdGlvbiIsImlzR2FtZU92ZXIiLCJjb21wdXRlciIsImdhbWVib2FyZEhhbmRsZXIiLCJyZWNlaXZlQXR0YWNrIiwiY29tcHV0ZXJCb2FyZERpc3BsYXkiLCJBSSIsInBsYXlNb3ZlIiwicGxheWVyQm9hcmREaXNwbGF5IiwicGxheVJvdW5kIiwicGxhY2VSYW5kb20iLCJTaGlwcyIsInF1ZXVlIiwic2hpZnQiLCJ0cnlUb1BsYWNlIiwiZGlyIiwicmVtb3ZlU2hpcEZyb21Cb2FyZCIsIm5ld0Nvb3JkcyIsImNlbGxzIiwicG9zWCIsInBvc1kiLCJib2FyZFNpemUiLCJjcmVhdGVib2FyZCIsImJvYXJkTG9nIiwicGxhY2VTaGlwc1JhbmRvbWx5Iiwic2l6ZSIsIkFycmF5IiwiZmlsbCIsIm1hcCIsImFyZVNoaXBzU3VuayIsInNvbWUiLCJnZXRTaGlwcyIsImF0dGFja2ZuIiwiY3JlYXRlQm9hcmQiLCJuZXh0TW92ZXMiLCJjdXJySGl0Q2VsbHMiLCJwbGF5U21hcnQiLCJwbGF5UmFuZG9tIiwicmVzcG9uc2UiLCJpc0hpdCIsImhpdERpciIsImNhbGNIaXREaXJlY3Rpb24iLCJzZXROZXh0TW92ZXMiLCJwb3AiLCJjaGFuZ2VEaXIiLCJsZW4iLCJ4MiIsInkyIiwieDEiLCJ5MSIsInJldmVyc2UiLCJyZXZIaXREaXIiLCJzbGljZSIsIm5YIiwiblkiLCJodW1hbiIsIndpbm5lciIsImluaXRpYWxpemVHYW1lIiwiYmluZCIsInBsYXllciIsImNsZWFyIiwiY3JlYXRlU2hpcENvbXBvbmVudCIsInNldCIsImtleXMiLCJhZGRFdmVudExpc3RlbmVyIiwicHJldmVudERlZmF1bHQiLCJlbmFibGVEcmFnRHJvcCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNhYmxlRHJhZ0Ryb3AiLCJ0b2dnbGUiXSwic291cmNlUm9vdCI6IiJ9