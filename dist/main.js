(()=>{"use strict";const t=class{constructor(t,e){this.name=t,this.length=e,this.health=e,this.coordinates=[],this.orientation=null}hit(){this.health-=1}isSunk(){return 0===this.health}},e=[{x:0,y:1},{x:1,y:0}];function n(t){return t[Math.floor(Math.random()*t.length)]}function r(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t.length;++r)null===t[n][r]&&e.push([n,r]);return n(e)}function s(){return`rgba(${255*Math.random()}, ${255*Math.random()}, ${255*Math.random()}, 0.5)`}function i([t,e],n){return t>=0&&t<n.length&&e>=0&&e<n.length}const o=document.querySelector(".player"),a=document.querySelector(".computer"),l=document.querySelector("#message"),c=8;function u(t){t.innerHTML="";for(let e=0;e<c;++e)for(let n=0;n<c;++n){const r=h(e,n);t.appendChild(r)}}function h(t,e){const n=document.createElement("div");return n.classList.add("cell"),n.dataset.x=t,n.dataset.y=e,n}function d({cell:t,hit:e},n){const r=n.querySelector(`[data-x="${t[0]}"][data-y="${t[1]}"]`);if(r.classList.contains("hit"))return null;r.classList.add("hit"),e&&r.classList.add("success");const s=document.createElement("span");s.innerHTML="&times;",r.prepend(s)}function p(t){l.textContent=t}let m=null,g=null;const f=new Map;let y=null,v=null,x=null,S=null,b=!1,L=null;function H(t){v=t.target,v.classList.add("dragging"),v.style.removeProperty("background-color"),b=!0,x=t.clientX,S=t.clientY}function C(t){if(b){v.classList.remove("dragging"),v.classList.remove("notplaceable"),v.style.left="0px",v.style.top="0px";const t=L;if(t&&function(t,e){const n=[Number(t.dataset.x),Number(t.dataset.y)],r=f.get(e);return y.placeShipAt(r,n,r.orientation)}(t,v))t.appendChild(v);else{const t=f.get(v);y.placeShipAt(t,t.coordinates[0],t.orientation)}}b=!1,v.style.backgroundColor=s(),k()}function M(t){b&&(y.removeShip(f.get(v)),v.style.left=t.clientX-x+"px",v.style.top=t.clientY-S+"px",L!==E()&&k(),L=E(),function(t){if(t){const e=f.get(v).length,n=function(t,e){const n=[];if(!t)return n;const r=Number(t.dataset.x),s=Number(t.dataset.y),i=f.get(v).orientation;for(let t=0;t<e;++t){const e=r+t*i.x,o=s+t*i.y,a=document.querySelector(`[data-x="${e}"][data-y="${o}"]`);a&&null===y.getBoard()[e][o]&&n.push(a)}return n}(t,e);if(n.length===e)return n.forEach((t=>{t.classList.add("highlight")})),void v.classList.remove("notplaceable")}v.classList.add("notplaceable")}(L))}function w(t){if(2===t.button){const e=60,n=t.target,r=f.get(n),s={x:1-r.orientation.x,y:1-r.orientation.y};y.placeShipAt(r,r.coordinates[0],s),n.style.width=`${Math.max(e,r.orientation.y*r.length*e)}px`,n.style.height=`${Math.max(e,r.orientation.x*r.length*e)}px`}}function E(){let t=1/0;return g.forEach((e=>{const n=Math.abs(e.getBoundingClientRect().x-v.getBoundingClientRect().x)+Math.abs(e.getBoundingClientRect().y-v.getBoundingClientRect().y);n<t&&(L=e,t=n)})),t>60?null:L}function k(){document.querySelectorAll(".highlight").forEach((t=>{t.classList.remove("highlight")}))}const A=document.querySelector(".main");function $(t){!t.target.classList.contains("hit")&&t.target.classList.contains("cell")&&function(t){if(X())return null;if(d({cell:t,hit:P.gameboardHandler.receiveAttack(t)},z),X())return null;d(P.AI.playMove(),F),X()}([t.target.dataset.x,t.target.dataset.y])}const q=class{static placeRandom(t,e){const n=[...t];for(;n.length>0;){const t=n.shift();this.tryToPlace(t,e)||n.push(t)}}static tryToPlace(t,s,i,o){i=i||r(s),o=o||n(e),this.removeShipFromBoard(t,s);const a=this.#t(t.length,i,s,o);return a.length<t.length?(t.coordinates.forEach((([e,n])=>s[e][n]=t)),!1):(t.coordinates=a,t.orientation=o,a.forEach((([e,n])=>s[e][n]=t)),!0)}static#t(t,e,n,r){const s=[];for(let o=0;o<t;++o){const t=e[0]+o*r.x,a=e[1]+o*r.y;i([t,a],n)&&null===n[t][a]&&s.push([t,a])}return s}static removeShipFromBoard(t,e){t.coordinates.forEach((([t,n])=>{e[t][n]=null}))}},R=class{constructor(){this.boardSize=8,this.Ships=[new t("Hydra",5),new t("Pegasus",4),new t("Orion",3),new t("Scorpius",2),new t("Leo",1)],this.board=this.createboard(this.boardSize),this.placeShipsRandomly()}createboard(t){return new Array(t).fill(null).map((()=>new Array(t).fill(null)))}placeShipsRandomly(){q.placeRandom(this.Ships,this.board)}placeShipAt(t,e,n){return q.tryToPlace(t,this.board,e,n)}removeShip(t){q.removeShipFromBoard(t,this.board)}areShipsSunk(){return!this.Ships.some((t=>!t.isSunk()))}receiveAttack([t,e]){return null!==this.board[t][e]&&(this.board[t][e].hit(),this.board[t][e]=null,!0)}getShips(){return this.Ships}getBoard(){return this.board}},B=class{constructor(t){this.name=t,this.gameboardHandler=new R}},N=class{constructor(t){this.board=this.createBoard(8),this.nextMoves=[],this.currHitCells=[],this.attackfn=t}createBoard(t){return new Array(t).fill(null).map((()=>new Array(t).fill(null)))}playMove(){return this.nextMoves.length>0?this.playSmart():this.playRandom()}playRandom(){const t={},e=r(this.board);if(t.cell=e,t.hit=!1,this.isHit(e)){t.hit=!0,this.currHitCells=[],this.currHitCells.push(e);const n=this.calcHitDirection();this.setNextMoves(e,n)}return t}playSmart(){const t={},e=this.nextMoves.pop();if(t.cell=e,t.hit=!1,this.isHit(e)){t.hit=!0,this.currHitCells.push(e);const n=this.calcHitDirection();this.setNextMoves(e,n)||this.changeDir()}else this.currHitCells.length>1&&this.changeDir();return t}isHit([t,e]){return this.board[t][e]="#",this.attackfn([t,e])}calcHitDirection(){const t=this.currHitCells.length;if(t>1){const[e,n]=this.currHitCells[t-1],[r,s]=this.currHitCells[t-2];return[[e-r,n-s]]}return[[0,1],[1,0],[0,-1],[-1,0]]}changeDir(){this.currHitCells.reverse();const t=this.calcHitDirection();this.setNextMoves(...this.currHitCells.slice(-1),t)}setNextMoves([t,e],n){this.nextMoves=[];for(let r=0;r<n.length;++r){const s=t+n[r][0],o=e+n[r][1];i([s,o],this.board)&&null===this.board[s][o]&&this.nextMoves.push([s,o])}return 0!==this.nextMoves.length}};let D=null,P=null,T=null,F=null,z=null;function I(){u(o),u(a),D=new B("Human"),P=new B("Computer"),P.AI=new N(D.gameboardHandler.receiveAttack.bind(D.gameboardHandler)),F=document.querySelector(".player"),z=document.querySelector(".computer"),function(t){var e;m=document.querySelector(".player"),g=document.querySelectorAll(".player .cell"),y=t.gameboardHandler,e=y.getShips(),f.clear(),e.forEach((t=>{const e=function(t){const e=document.createElement("div");return e.classList.add("ship",t.name),e.style.backgroundColor=s(),e.style.top="0px",e.style.left="0px",e.style.width=`${Math.max(60,t.orientation.y*t.length*60)}px`,e.style.height=`${Math.max(60,t.orientation.x*t.length*60)}px`,e}(t);f.set(e,t);const[n,r]=t.coordinates[0];m.querySelector(`[data-x="${n}"][data-y="${r}"]`).appendChild(e)}));for(const t of f.keys())t.addEventListener("mousedown",H),t.addEventListener("mouseup",C),t.addEventListener("mouseup",w);document.addEventListener("mousemove",M),m.addEventListener("contextmenu",(t=>t.preventDefault()))}(D),z.removeEventListener("click",$),p("Drag & Drop Ships. Right Click to Rotate")}function X(){return D.gameboardHandler.areShipsSunk()?T=P:P.gameboardHandler.areShipsSunk()&&(T=D),null!==T&&p(`${T.name} wins!`),null!==T}A.addEventListener("click",(function(t){A.classList.contains("start")?(T=null,function(){for(const t of f.keys())t.removeEventListener("mousedown",H),t.removeEventListener("mouseup",C),t.removeEventListener("mouseup",w)}(),z.addEventListener("click",$),p(""),A.textContent="New Game"):(I(),A.textContent="Play"),A.classList.toggle("start")})),I()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TDFDN0QsRUFBWSwyQ0FDZixDQXdCQSxTQUFTK0QsSUFXTixPQVZJcUQsRUFBTW5ELGlCQUFpQnlCLGVBQ3hCMkIsRUFBU3JELEVBQ0RBLEVBQVNDLGlCQUFpQnlCLGlCQUNsQzJCLEVBQVNELEdBR0csT0FBWEMsR0FDRHJILEVBQVksR0FBR3FILEVBQU9uSyxjQUdQLE9BQVhtSyxDQUNWLENEcERHekQsRUFBV2lFLGlCQUFpQixTQUcvQixTQUE0QmhILEdBQ3JCK0MsRUFBV3JFLFVBQVVNLFNBQVMsVUNlbEN3SCxFQUFTLEtGT1osV0FDSSxJQUFLLE1BQU05RixLQUFpQm5CLEVBQU93SCxPQUNoQ3JHLEVBQWN5RyxvQkFBb0IsWUFBYXBILEdBQy9DVyxFQUFjeUcsb0JBQW9CLFVBQVc3RyxHQUM3Q0ksRUFBY3lHLG9CQUFvQixVQUFXakYsRUFFcEQsQ0VaR2tGLEdBQ2U5RCxFRExGMEQsaUJBQWlCLFFBQVNoRSxHQ012QzdELEVBQVksSURoQlQ0RCxFQUFXMUQsWUFBYyxhQUV6Qm9ILElBQ0ExRCxFQUFXMUQsWUFBYyxRQUc1QjBELEVBQVdyRSxVQUFVMkksT0FBTyxRQUMvQixJTWRBWixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvc2hpcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9kb20uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvZHJhZ19kcm9wLmpzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL2dhbWVVSS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9nYW1lQ29udG9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL3NoaXBQbGFjZW1lbnRIYW5kbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGVzL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kdWxlcy9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZHVsZXMvY29tcHV0ZXJBSS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgU2hpcCB7XG4gICBjb25zdHJ1Y3RvcihuYW1lLCBsZW5ndGgpIHtcbiAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgIHRoaXMuaGVhbHRoID0gbGVuZ3RoO1xuICAgICAgdGhpcy5jb29yZGluYXRlcyA9IFtdO1xuICAgICAgdGhpcy5vcmllbnRhdGlvbiA9IG51bGw7XG4gICB9XG5cbiAgIGhpdCgpIHtcbiAgICAgIHRoaXMuaGVhbHRoIC09IDE7XG4gICB9XG5cbiAgIGlzU3VuaygpIHtcbiAgICAgIHJldHVybiB0aGlzLmhlYWx0aCA9PT0gMDtcbiAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2hpcDtcbiIsImltcG9ydCBTaGlwIGZyb20gJy4vc2hpcCc7XG5cbmNvbnN0IGhvcml6b250YWwgPSB7XG4gICB4OiAwLFxuICAgeTogMVxufTtcblxuY29uc3QgdmVydGljYWwgPSB7XG4gICB4OiAxLFxuICAgeTogMFxufTtcblxuY29uc3QgZGlycyA9IFtob3Jpem9udGFsLCB2ZXJ0aWNhbF07XG5cbmZ1bmN0aW9uIHNlbGVjdFJhbmRvbShhcnJheSkge1xuICAgY29uc3QgcmFuZG9tTnVtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyYXkubGVuZ3RoKTtcbiAgIHJldHVybiBhcnJheVtyYW5kb21OdW1dO1xufVxuXG5mdW5jdGlvbiBnZXRSYW5kb21EaXJlY3Rpb24oKSB7XG4gICByZXR1cm4gc2VsZWN0UmFuZG9tKGRpcnMpO1xufVxuXG5mdW5jdGlvbiBnZXRSYW5kb21FbXB0eUNlbGwoYm9hcmQpIHtcbiAgIGNvbnN0IGVtcHR5Q2VsbHMgPSBbXTtcblxuICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2FyZC5sZW5ndGg7ICsraSkge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBib2FyZC5sZW5ndGg7ICsraikge1xuICAgICAgICAgaWYgKGJvYXJkW2ldW2pdID09PSBudWxsKSB7XG4gICAgICAgICAgICBlbXB0eUNlbGxzLnB1c2goW2ksIGpdKTtcbiAgICAgICAgIH1cbiAgICAgIH1cbiAgIH1cblxuICAgcmV0dXJuIHNlbGVjdFJhbmRvbShlbXB0eUNlbGxzKTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVTaGlwcygpIHtcbiAgIGNvbnN0IFNoaXBzID0gW1xuICAgICAgbmV3IFNoaXAoJ0h5ZHJhJywgNSksXG4gICAgICBuZXcgU2hpcCgnUGVnYXN1cycsIDQpLFxuICAgICAgbmV3IFNoaXAoJ09yaW9uJywgMyksXG4gICAgICBuZXcgU2hpcCgnU2NvcnBpdXMnLCAyKSxcbiAgICAgIG5ldyBTaGlwKCdMZW8nLCAxKVxuICAgXTtcblxuICAgcmV0dXJuIFNoaXBzO1xufVxuXG5mdW5jdGlvbiBnZXRSYW5kb21Db2xvcigpIHtcbiAgIGNvbnN0IGNvbG9yID0gYHJnYmEoJHtNYXRoLnJhbmRvbSgpICogMjU1fSwgJHtNYXRoLnJhbmRvbSgpICogMjU1fSwgJHtcbiAgICAgIE1hdGgucmFuZG9tKCkgKiAyNTVcbiAgIH0sICR7MC41fSlgO1xuXG4gICByZXR1cm4gY29sb3I7XG59XG5cbmZ1bmN0aW9uIGNoZWNrQm91bmQoW3gsIHldLCBib2FyZCkge1xuICAgcmV0dXJuIHggPj0gMCAmJiB4IDwgYm9hcmQubGVuZ3RoICYmIHkgPj0gMCAmJiB5IDwgYm9hcmQubGVuZ3RoO1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVTY29yZShib2FyZCl7XG4gICBjb25zb2xlLmxvZyhib2FyZCk7XG4gICBsZXQgbWlzc0NvdW50ID0gMDtcblxuICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2FyZC5sZW5ndGg7ICsraSkge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBib2FyZC5sZW5ndGg7ICsraikge1xuICAgICAgICAgaWYgKGJvYXJkW2ldW2pdID09PSAnbWlzcycpIG1pc3NDb3VudCArPSAxO1xuICAgICAgfVxuICAgfVxuXG4gICByZXR1cm4gTWF0aC5jZWlsKCgxNSAvIG1pc3NDb3VudCkgKiAxMDAwMCk7XG59XG5cbmV4cG9ydCB7XG4gICBnZXRSYW5kb21FbXB0eUNlbGwsXG4gICBnZXRSYW5kb21EaXJlY3Rpb24sXG4gICBnZW5lcmF0ZVNoaXBzLFxuICAgZ2V0UmFuZG9tQ29sb3IsXG4gICBjaGVja0JvdW5kLFxuICAgY2FsY3VsYXRlU2NvcmVcbn07XG4iLCJpbXBvcnQgeyBnZXRSYW5kb21Db2xvciB9IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBwbGF5ZXJCb2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5ZXInKTtcbmNvbnN0IGNvbXB1dGVyQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tcHV0ZXInKTtcbmNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZScpO1xuXG5jb25zdCBncmlkU2l6ZSA9IDg7XG5cbmZ1bmN0aW9uIGNyZWF0ZUJvYXJkRGlzcGxheSgpIHtcbiAgIGNyZWF0ZUdyaWQocGxheWVyQm9hcmQpO1xuICAgY3JlYXRlR3JpZChjb21wdXRlckJvYXJkKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlR3JpZChjb250YWluZXIpIHtcbiAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuXG4gICBmb3IgKGxldCBpID0gMDsgaSA8IGdyaWRTaXplOyArK2kpIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ3JpZFNpemU7ICsraikge1xuICAgICAgICAgY29uc3QgY2VsbCA9IGNyZWF0ZUNlbGwoaSwgaik7XG4gICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2VsbCk7XG4gICAgICB9XG4gICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNlbGwoaSwgaikge1xuICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdjZWxsJyk7XG4gICBjZWxsLmRhdGFzZXQueCA9IGk7XG4gICBjZWxsLmRhdGFzZXQueSA9IGo7XG5cbiAgIHJldHVybiBjZWxsO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTaGlwQ29tcG9uZW50KHNoaXApIHtcbiAgIGNvbnN0IGNlbGxTaXplID0gNjA7XG4gICBjb25zdCBzaGlwQ29tcG9uZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgIHNoaXBDb21wb25lbnQuY2xhc3NMaXN0LmFkZCgnc2hpcCcsIHNoaXAubmFtZSk7XG4gICBzaGlwQ29tcG9uZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGdldFJhbmRvbUNvbG9yKCk7XG4gICBzaGlwQ29tcG9uZW50LnN0eWxlLnRvcCA9ICcwcHgnO1xuICAgc2hpcENvbXBvbmVudC5zdHlsZS5sZWZ0ID0gJzBweCc7XG4gICBzaGlwQ29tcG9uZW50LnN0eWxlLndpZHRoID0gYCR7TWF0aC5tYXgoXG4gICAgICBjZWxsU2l6ZSxcbiAgICAgIHNoaXAub3JpZW50YXRpb24ueSAqIHNoaXAubGVuZ3RoICogY2VsbFNpemVcbiAgICl9cHhgO1xuICAgc2hpcENvbXBvbmVudC5zdHlsZS5oZWlnaHQgPSBgJHtNYXRoLm1heChcbiAgICAgIGNlbGxTaXplLFxuICAgICAgc2hpcC5vcmllbnRhdGlvbi54ICogc2hpcC5sZW5ndGggKiBjZWxsU2l6ZVxuICAgKX1weGA7XG5cbiAgIHJldHVybiBzaGlwQ29tcG9uZW50O1xufVxuXG5mdW5jdGlvbiBtYXJrQ2VsbCh7Y2VsbCwgaGl0fSwgYm9hcmREaXNwbGF5KXtcbiAgIGNvbnN0IGdyaWRDZWxsID0gYm9hcmREaXNwbGF5LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXg9XCIke2NlbGxbMF19XCJdW2RhdGEteT1cIiR7Y2VsbFsxXX1cIl1gKTtcbiAgIFxuICAgaWYoZ3JpZENlbGwuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaXQnKSkgcmV0dXJuIG51bGw7XG5cbiAgIGdyaWRDZWxsLmNsYXNzTGlzdC5hZGQoJ2hpdCcpO1xuICAgaWYoaGl0KSBncmlkQ2VsbC5jbGFzc0xpc3QuYWRkKCdzdWNjZXNzJyk7XG4gICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgIGVsLmlubmVySFRNTCA9ICcmdGltZXM7J1xuICAgZ3JpZENlbGwucHJlcGVuZChlbCk7XG59XG5cbmZ1bmN0aW9uIHNob3dNZXNzYWdlKG1lc3NhZ2Upe1xuICAgbWVzc2FnZUNvbnRhaW5lci50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG59XG5cbmV4cG9ydCB7IGNyZWF0ZUJvYXJkRGlzcGxheSwgY3JlYXRlU2hpcENvbXBvbmVudCwgbWFya0NlbGwsIHNob3dNZXNzYWdlIH07XG4iLCJpbXBvcnQgeyBnZXRSYW5kb21Db2xvciB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgY3JlYXRlU2hpcENvbXBvbmVudCB9IGZyb20gJy4vZG9tJztcblxubGV0IHBsYXllckJvYXJkID0gbnVsbDtcbmxldCBDZWxscyA9IG51bGw7XG5jb25zdCBtYXBwZXIgPSBuZXcgTWFwKCk7XG5cbmxldCBib2FyZEhhbmRsZXIgPSBudWxsO1xubGV0IGN1cnJTaGlwID0gbnVsbDtcbmxldCBpbml0aWFsWCA9IG51bGw7XG5sZXQgaW5pdGlhbFkgPSBudWxsO1xubGV0IGlzZHJhZ2dpbmcgPSBmYWxzZTtcbmxldCBzdGFydENlbGwgPSBudWxsO1xuXG5mdW5jdGlvbiBlbmFibGVEcmFnRHJvcChwbGF5ZXIpIHtcbiAgIHBsYXllckJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcicpO1xuICAgQ2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGxheWVyIC5jZWxsJyk7XG5cbiAgIGJvYXJkSGFuZGxlciA9IHBsYXllci5nYW1lYm9hcmRIYW5kbGVyO1xuICAgaW5pdFNoaXBDb21wb25lbnRzKGJvYXJkSGFuZGxlci5nZXRTaGlwcygpKTtcblxuICAgZm9yIChjb25zdCBzaGlwQ29tcG9uZW50IG9mIG1hcHBlci5rZXlzKCkpIHtcbiAgICAgIHNoaXBDb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICAgIHNoaXBDb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZURyYWdFbmQpO1xuICAgICAgc2hpcENvbXBvbmVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgcm90YXRlU2hpcCk7XG4gICB9XG5cbiAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZURyYWdnaW5nKTtcbiAgIHBsYXllckJvYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKGUpID0+IGUucHJldmVudERlZmF1bHQoKSk7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVEcmFnRHJvcCgpe1xuICAgIGZvciAoY29uc3Qgc2hpcENvbXBvbmVudCBvZiBtYXBwZXIua2V5cygpKSB7XG4gICAgICAgc2hpcENvbXBvbmVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVEcmFnU3RhcnQpO1xuICAgICAgIHNoaXBDb21wb25lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZURyYWdFbmQpO1xuICAgICAgIHNoaXBDb21wb25lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHJvdGF0ZVNoaXApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaW5pdFNoaXBDb21wb25lbnRzKFNoaXBzKSB7XG4gICBtYXBwZXIuY2xlYXIoKTtcblxuICAgU2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgY29uc3Qgc2hpcENvbXBvbmVudCA9IGNyZWF0ZVNoaXBDb21wb25lbnQoc2hpcCk7XG4gICAgICBtYXBwZXIuc2V0KHNoaXBDb21wb25lbnQsIHNoaXApO1xuICAgICAgY29uc3QgW3gsIHldID0gc2hpcC5jb29yZGluYXRlc1swXTtcbiAgICAgIGNvbnN0IGNlbGwgPSBwbGF5ZXJCb2FyZC5xdWVyeVNlbGVjdG9yKGBbZGF0YS14PVwiJHt4fVwiXVtkYXRhLXk9XCIke3l9XCJdYCk7XG4gICAgICBjZWxsLmFwcGVuZENoaWxkKHNoaXBDb21wb25lbnQpO1xuICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURyYWdTdGFydChlKSB7XG4gICBjdXJyU2hpcCA9IGUudGFyZ2V0O1xuICAgY3VyclNoaXAuY2xhc3NMaXN0LmFkZCgnZHJhZ2dpbmcnKTtcbiAgIGN1cnJTaGlwLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdiYWNrZ3JvdW5kLWNvbG9yJyk7XG4gICBcbiAgIGlzZHJhZ2dpbmcgPSB0cnVlO1xuICAgaW5pdGlhbFggPSBlLmNsaWVudFg7XG4gICBpbml0aWFsWSA9IGUuY2xpZW50WTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRHJhZ0VuZChlKSB7XG4gICBpZiAoaXNkcmFnZ2luZykge1xuICAgICAgY3VyclNoaXAuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZ2dpbmcnKTtcbiAgICAgIGN1cnJTaGlwLmNsYXNzTGlzdC5yZW1vdmUoJ25vdHBsYWNlYWJsZScpO1xuICAgICAgY3VyclNoaXAuc3R5bGUubGVmdCA9ICcwcHgnO1xuICAgICAgY3VyclNoaXAuc3R5bGUudG9wID0gJzBweCc7XG5cbiAgICAgIGNvbnN0IGNlbGwgPSBzdGFydENlbGw7XG4gICAgICBpZiAoIWNlbGwgfHwgIWlzUGxhY2VhYmxlKGNlbGwsIGN1cnJTaGlwKSkge1xuICAgICAgICAgY29uc3Qgc2hpcCA9IG1hcHBlci5nZXQoY3VyclNoaXApO1xuICAgICAgICAgYm9hcmRIYW5kbGVyLnBsYWNlU2hpcEF0KHNoaXAsIHNoaXAuY29vcmRpbmF0ZXNbMF0sIHNoaXAub3JpZW50YXRpb24pOyBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICBjZWxsLmFwcGVuZENoaWxkKGN1cnJTaGlwKTtcbiAgICAgIH1cbiAgIH1cblxuICAgaXNkcmFnZ2luZyA9IGZhbHNlO1xuICAgY3VyclNoaXAuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZ2V0UmFuZG9tQ29sb3IoKTtcbiAgIGNsZWFySGlnaGxpZ2h0KCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURyYWdnaW5nKGUpIHtcbiAgIGlmIChpc2RyYWdnaW5nKSB7XG4gICAgICBib2FyZEhhbmRsZXIucmVtb3ZlU2hpcChtYXBwZXIuZ2V0KGN1cnJTaGlwKSk7XG5cbiAgICAgIGN1cnJTaGlwLnN0eWxlLmxlZnQgPSBgJHtlLmNsaWVudFggLSBpbml0aWFsWH1weGA7XG4gICAgICBjdXJyU2hpcC5zdHlsZS50b3AgPSBgJHtlLmNsaWVudFkgLSBpbml0aWFsWX1weGA7XG5cbiAgICAgIGlmIChzdGFydENlbGwgIT09IGZpbmRTdGFydENlbGwoKSkge1xuICAgICAgICAgY2xlYXJIaWdobGlnaHQoKTtcbiAgICAgIH1cblxuICAgICAgc3RhcnRDZWxsID0gZmluZFN0YXJ0Q2VsbCgpO1xuICAgICAgaGlnaGxpZ2h0Q2VsbHMoc3RhcnRDZWxsKTtcbiAgIH1cbn1cblxuZnVuY3Rpb24gcm90YXRlU2hpcChlKSB7XG4gICBpZiAoZS5idXR0b24gPT09IDIpIHtcbiAgICAgIGNvbnN0IGNlbGxTaXplID0gNjA7XG4gICAgICBjb25zdCBzaGlwQ29tcG9uZW50ID0gZS50YXJnZXQ7XG4gICAgICBjb25zdCBzaGlwID0gbWFwcGVyLmdldChzaGlwQ29tcG9uZW50KTtcbiAgICAgIGNvbnN0IG5ld2RpciA9IHtcbiAgICAgICAgIHg6IDEgLSBzaGlwLm9yaWVudGF0aW9uLngsXG4gICAgICAgICB5OiAxIC0gc2hpcC5vcmllbnRhdGlvbi55XG4gICAgICB9O1xuXG4gICAgICBib2FyZEhhbmRsZXIucGxhY2VTaGlwQXQoc2hpcCwgc2hpcC5jb29yZGluYXRlc1swXSwgbmV3ZGlyKTtcblxuICAgICAgc2hpcENvbXBvbmVudC5zdHlsZS53aWR0aCA9IGAke01hdGgubWF4KFxuICAgICAgICAgY2VsbFNpemUsXG4gICAgICAgICBzaGlwLm9yaWVudGF0aW9uLnkgKiBzaGlwLmxlbmd0aCAqIGNlbGxTaXplXG4gICAgICApfXB4YDtcbiAgICAgIHNoaXBDb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7TWF0aC5tYXgoXG4gICAgICAgICBjZWxsU2l6ZSxcbiAgICAgICAgIHNoaXAub3JpZW50YXRpb24ueCAqIHNoaXAubGVuZ3RoICogY2VsbFNpemVcbiAgICAgICl9cHhgO1xuICAgfVxufVxuXG5mdW5jdGlvbiBmaW5kU3RhcnRDZWxsKCkge1xuICAgbGV0IG1pbkRpc3QgPSBJbmZpbml0eTtcbiAgIGNvbnN0IG1heE1pbkRpc3QgPSA2MDtcblxuICAgQ2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgY29uc3QgZGlzdCA9XG4gICAgICAgICBNYXRoLmFicyhcbiAgICAgICAgICAgIGNlbGwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueCAtIGN1cnJTaGlwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnhcbiAgICAgICAgICkgK1xuICAgICAgICAgTWF0aC5hYnMoXG4gICAgICAgICAgICBjZWxsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnkgLSBjdXJyU2hpcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS55XG4gICAgICAgICApO1xuICAgICAgaWYgKGRpc3QgPCBtaW5EaXN0KSB7XG4gICAgICAgICBzdGFydENlbGwgPSBjZWxsO1xuICAgICAgICAgbWluRGlzdCA9IGRpc3Q7XG4gICAgICB9XG4gICB9KTtcblxuICAgaWYgKG1pbkRpc3QgPiBtYXhNaW5EaXN0KSByZXR1cm4gbnVsbDtcblxuICAgcmV0dXJuIHN0YXJ0Q2VsbDtcbn1cblxuZnVuY3Rpb24gaXNQbGFjZWFibGUoY2VsbCwgc2hpcENvbXBvbmVudCkge1xuICAgY29uc3Qgc3RydENlbGwgPSBbTnVtYmVyKGNlbGwuZGF0YXNldC54KSwgTnVtYmVyKGNlbGwuZGF0YXNldC55KV07XG4gICBjb25zdCBzaGlwID0gbWFwcGVyLmdldChzaGlwQ29tcG9uZW50KTtcbiAgIHJldHVybiBib2FyZEhhbmRsZXIucGxhY2VTaGlwQXQoc2hpcCwgc3RydENlbGwsIHNoaXAub3JpZW50YXRpb24pO1xufVxuXG5mdW5jdGlvbiBoaWdobGlnaHRDZWxscyhjZWxsKSB7XG4gICBpZiAoY2VsbCkge1xuICAgICAgY29uc3QgcmVxbGVuZ3RoID0gbWFwcGVyLmdldChjdXJyU2hpcCkubGVuZ3RoO1xuICAgICAgY29uc3QgbmVhcmJ5Q2VsbHMgPSBnZXROZWFyYnlDZWxscyhjZWxsLCByZXFsZW5ndGgpO1xuXG4gICAgICBpZiAobmVhcmJ5Q2VsbHMubGVuZ3RoID09PSByZXFsZW5ndGgpIHtcbiAgICAgICAgIG5lYXJieUNlbGxzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQnKTtcbiAgICAgICAgIH0pO1xuICAgICAgICAgY3VyclNoaXAuY2xhc3NMaXN0LnJlbW92ZSgnbm90cGxhY2VhYmxlJyk7XG4gICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICB9XG5cbiAgIGN1cnJTaGlwLmNsYXNzTGlzdC5hZGQoJ25vdHBsYWNlYWJsZScpO1xufVxuXG5mdW5jdGlvbiBnZXROZWFyYnlDZWxscyhjZWxsLCBsZW5ndGgpIHtcbiAgIGNvbnN0IGNlbGxMaXN0ID0gW107XG5cbiAgIGlmICghY2VsbCkgcmV0dXJuIGNlbGxMaXN0O1xuXG4gICBjb25zdCBzdHJ0eCA9IE51bWJlcihjZWxsLmRhdGFzZXQueCk7XG4gICBjb25zdCBzdHJ0eSA9IE51bWJlcihjZWxsLmRhdGFzZXQueSk7XG4gICBjb25zdCBjdXJyRGlyID0gbWFwcGVyLmdldChjdXJyU2hpcCkub3JpZW50YXRpb247XG5cbiAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IG54ID0gc3RydHggKyBpICogY3VyckRpci54O1xuICAgICAgY29uc3QgbnkgPSBzdHJ0eSArIGkgKiBjdXJyRGlyLnk7XG5cbiAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEteD1cIiR7bnh9XCJdW2RhdGEteT1cIiR7bnl9XCJdYCk7XG4gICAgICBpZiAoZWwgJiYgYm9hcmRIYW5kbGVyLmdldEJvYXJkKClbbnhdW255XSA9PT0gbnVsbCkgY2VsbExpc3QucHVzaChlbCk7XG4gICB9XG5cbiAgIHJldHVybiBjZWxsTGlzdDtcbn1cblxuZnVuY3Rpb24gY2xlYXJIaWdobGlnaHQoKSB7XG4gICBjb25zdCBoaWdobGlnaHRlZENlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhpZ2hsaWdodCcpO1xuICAgaGlnaGxpZ2h0ZWRDZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodCcpO1xuICAgfSk7XG59XG5cbmV4cG9ydCB7IGVuYWJsZURyYWdEcm9wLCBkaXNhYmxlRHJhZ0Ryb3AgfTtcbiIsImltcG9ydCB7IHBsYXlSb3VuZCwgaW5pdGlhbGl6ZUdhbWUsIHN0YXJ0R2FtZSB9IGZyb20gJy4vZ2FtZUNvbnRvbGxlcic7XG5cbmNvbnN0IG1haW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbicpO1xuXG5mdW5jdGlvbiBpbml0VUkoKSB7XG4gICBtYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlTWFpbkJ0bkNsaWNrKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTWFpbkJ0bkNsaWNrKGUpIHtcbiAgIGlmIChtYWluQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnc3RhcnQnKSkge1xuICAgICAgc3RhcnRHYW1lKCk7XG4gICAgICBtYWluQnV0dG9uLnRleHRDb250ZW50ID0gJ05ldyBHYW1lJztcbiAgIH0gZWxzZSB7XG4gICAgICBpbml0aWFsaXplR2FtZSgpO1xuICAgICAgbWFpbkJ1dHRvbi50ZXh0Q29udGVudCA9ICdQbGF5JztcbiAgIH1cblxuICAgbWFpbkJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdzdGFydCcpO1xufVxuXG5mdW5jdGlvbiBlbmFibGVBdHRhY2tVSShib2FyZERpc3BsYXkpIHtcbiAgIGJvYXJkRGlzcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGF0dGFja0NlbGwpO1xufVxuXG5mdW5jdGlvbiBkaXNhYmxlQXR0YWNrVUkoYm9hcmREaXNwbGF5KSB7XG4gICBib2FyZERpc3BsYXkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhdHRhY2tDZWxsKTtcbn1cblxuZnVuY3Rpb24gYXR0YWNrQ2VsbChlKSB7XG4gICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaXQnKSkgcmV0dXJuO1xuICAgXG4gICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjZWxsJykpIHtcbiAgICAgIGNvbnN0IHggPSBlLnRhcmdldC5kYXRhc2V0Lng7XG4gICAgICBjb25zdCB5ID0gZS50YXJnZXQuZGF0YXNldC55O1xuXG4gICAgICBwbGF5Um91bmQoW3gsIHldKTtcbiAgIH1cbn1cblxuZXhwb3J0IHsgZW5hYmxlQXR0YWNrVUksIGRpc2FibGVBdHRhY2tVSSwgaW5pdFVJIH07XG4iLCJpbXBvcnQgeyBjcmVhdGVCb2FyZERpc3BsYXksIG1hcmtDZWxsLCBzaG93TWVzc2FnZSB9IGZyb20gJy4vZG9tJztcbmltcG9ydCB7IGVuYWJsZURyYWdEcm9wLCBkaXNhYmxlRHJhZ0Ryb3AgfSBmcm9tICcuL2RyYWdfZHJvcCc7XG5pbXBvcnQgeyBlbmFibGVBdHRhY2tVSSwgZGlzYWJsZUF0dGFja1VJIH0gZnJvbSAnLi9nYW1lVUknO1xuaW1wb3J0IFBsYXllciBmcm9tICcuL3BsYXllcic7XG5pbXBvcnQgQUkgZnJvbSAnLi9jb21wdXRlckFJJztcblxubGV0IGh1bWFuID0gbnVsbDtcbmxldCBjb21wdXRlciA9IG51bGw7XG5sZXQgd2lubmVyID0gbnVsbDtcblxubGV0IHBsYXllckJvYXJkRGlzcGxheSA9IG51bGw7XG5sZXQgY29tcHV0ZXJCb2FyZERpc3BsYXkgPSBudWxsO1xuXG5mdW5jdGlvbiBpbml0aWFsaXplR2FtZSgpIHtcbiAgIGNyZWF0ZUJvYXJkRGlzcGxheSgpO1xuICAgY3JlYXRlUGxheWVycygpO1xuICAgcGxheWVyQm9hcmREaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllcicpO1xuICAgY29tcHV0ZXJCb2FyZERpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tcHV0ZXInKTtcbiAgIGVuYWJsZURyYWdEcm9wKGh1bWFuKTtcbiAgIGRpc2FibGVBdHRhY2tVSShjb21wdXRlckJvYXJkRGlzcGxheSk7XG4gICBzaG93TWVzc2FnZSgnRHJhZyAmIERyb3AgU2hpcHMuIFJpZ2h0IENsaWNrIHRvIFJvdGF0ZScpO1xufVxuXG5mdW5jdGlvbiBzdGFydEdhbWUoKSB7XG4gICB3aW5uZXIgPSBudWxsO1xuICAgZGlzYWJsZURyYWdEcm9wKCk7XG4gICBlbmFibGVBdHRhY2tVSShjb21wdXRlckJvYXJkRGlzcGxheSk7XG4gICBzaG93TWVzc2FnZSgnJyk7XG59XG5cbmZ1bmN0aW9uIHBsYXlSb3VuZChwbGF5ZXJTZWxlY3Rpb24pIHtcbiAgIGlmIChpc0dhbWVPdmVyKCkpIHJldHVybiBudWxsO1xuXG4gICBjb25zdCBpc0hpdCA9IGNvbXB1dGVyLmdhbWVib2FyZEhhbmRsZXIucmVjZWl2ZUF0dGFjayhwbGF5ZXJTZWxlY3Rpb24pO1xuICAgXG4gICBtYXJrQ2VsbCh7IGNlbGw6IHBsYXllclNlbGVjdGlvbiwgaGl0OiBpc0hpdCB9LCBjb21wdXRlckJvYXJkRGlzcGxheSk7XG5cbiAgIGlmIChpc0dhbWVPdmVyKCkpIHJldHVybiBudWxsO1xuXG4gICBjb25zdCByZXNwb25zZSA9IGNvbXB1dGVyLkFJLnBsYXlNb3ZlKCk7XG4gICBtYXJrQ2VsbChyZXNwb25zZSwgcGxheWVyQm9hcmREaXNwbGF5KTtcblxuICAgaWYgKGlzR2FtZU92ZXIoKSkgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzR2FtZU92ZXIoKSB7XG4gICBpZiAoaHVtYW4uZ2FtZWJvYXJkSGFuZGxlci5hcmVTaGlwc1N1bmsoKSkge1xuICAgICAgd2lubmVyID0gY29tcHV0ZXI7XG4gICB9IGVsc2UgaWYgKGNvbXB1dGVyLmdhbWVib2FyZEhhbmRsZXIuYXJlU2hpcHNTdW5rKCkpIHtcbiAgICAgIHdpbm5lciA9IGh1bWFuO1xuICAgfVxuXG4gICBpZiAod2lubmVyICE9PSBudWxsKSB7XG4gICAgICBzaG93TWVzc2FnZShgJHt3aW5uZXIubmFtZX0gd2lucyFgKTtcbiAgIH1cblxuICAgcmV0dXJuIHdpbm5lciAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUGxheWVycygpIHtcbiAgIGh1bWFuID0gbmV3IFBsYXllcignSHVtYW4nKTtcbiAgIGNvbXB1dGVyID0gbmV3IFBsYXllcignQ29tcHV0ZXInKTtcbiAgIGNvbXB1dGVyLkFJID0gbmV3IEFJKFxuICAgICAgaHVtYW4uZ2FtZWJvYXJkSGFuZGxlci5yZWNlaXZlQXR0YWNrLmJpbmQoaHVtYW4uZ2FtZWJvYXJkSGFuZGxlcilcbiAgICk7XG59XG5cbmV4cG9ydCB7IHBsYXlSb3VuZCwgaW5pdGlhbGl6ZUdhbWUsIHN0YXJ0R2FtZSB9O1xuIiwiaW1wb3J0IHsgZ2V0UmFuZG9tRW1wdHlDZWxsLCBnZXRSYW5kb21EaXJlY3Rpb24sIGNoZWNrQm91bmQgfSBmcm9tICcuL3V0aWxzJztcblxuY2xhc3MgUGxhY2VtZW50SGFuZGxlciB7XG4gICBzdGF0aWMgcGxhY2VSYW5kb20oU2hpcHMsIGJvYXJkKSB7XG4gICAgICBjb25zdCBxdWV1ZSA9IFsuLi5TaGlwc107XG5cbiAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICBjb25zdCBzaGlwID0gcXVldWUuc2hpZnQoKTtcblxuICAgICAgICAgY29uc3QgaXNTaGlwUGxhY2VkID0gdGhpcy50cnlUb1BsYWNlKHNoaXAsIGJvYXJkKTtcblxuICAgICAgICAgaWYgKCFpc1NoaXBQbGFjZWQpIHF1ZXVlLnB1c2goc2hpcCk7XG4gICAgICB9XG4gICB9XG5cbiAgIHN0YXRpYyB0cnlUb1BsYWNlKHNoaXAsIGJvYXJkLCBzdHJ0Q2VsbCwgZGlyKSB7XG4gICAgICBzdHJ0Q2VsbCA9IHN0cnRDZWxsIHx8IGdldFJhbmRvbUVtcHR5Q2VsbChib2FyZCk7XG4gICAgICBkaXIgPSBkaXIgfHwgZ2V0UmFuZG9tRGlyZWN0aW9uKCk7XG5cbiAgICAgIHRoaXMucmVtb3ZlU2hpcEZyb21Cb2FyZChzaGlwLCBib2FyZCk7XG5cbiAgICAgIGNvbnN0IG5ld0Nvb3JkcyA9IHRoaXMuI2dldE5ld0Nvb3JkaW5hdGVzKFxuICAgICAgICAgc2hpcC5sZW5ndGgsXG4gICAgICAgICBzdHJ0Q2VsbCxcbiAgICAgICAgIGJvYXJkLFxuICAgICAgICAgZGlyXG4gICAgICApO1xuXG4gICAgICBpZiAobmV3Q29vcmRzLmxlbmd0aCA8IHNoaXAubGVuZ3RoKSB7XG4gICAgICAgICBzaGlwLmNvb3JkaW5hdGVzLmZvckVhY2goKFt4LCB5XSkgPT4gKGJvYXJkW3hdW3ldID0gc2hpcCkpO1xuICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBzaGlwLmNvb3JkaW5hdGVzID0gbmV3Q29vcmRzO1xuICAgICAgc2hpcC5vcmllbnRhdGlvbiA9IGRpcjtcbiAgICAgIG5ld0Nvb3Jkcy5mb3JFYWNoKChbeCwgeV0pID0+IChib2FyZFt4XVt5XSA9IHNoaXApKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgfVxuXG4gICBzdGF0aWMgI2dldE5ld0Nvb3JkaW5hdGVzKGxlbmd0aCwgc3RydENlbGwsIGJvYXJkLCBkaXIpIHtcbiAgICAgIGNvbnN0IGNlbGxzID0gW107XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgIGNvbnN0IHBvc1ggPSBzdHJ0Q2VsbFswXSArIGkgKiBkaXIueDtcbiAgICAgICAgIGNvbnN0IHBvc1kgPSBzdHJ0Q2VsbFsxXSArIGkgKiBkaXIueTtcblxuICAgICAgICAgaWYgKGNoZWNrQm91bmQoW3Bvc1gsIHBvc1ldLCBib2FyZCkgJiYgYm9hcmRbcG9zWF1bcG9zWV0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIGNlbGxzLnB1c2goW3Bvc1gsIHBvc1ldKTtcbiAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNlbGxzO1xuICAgfVxuXG4gICBzdGF0aWMgcmVtb3ZlU2hpcEZyb21Cb2FyZChzaGlwLCBib2FyZCkge1xuICAgICAgc2hpcC5jb29yZGluYXRlcy5mb3JFYWNoKChbeCwgeV0pID0+IHtcbiAgICAgICAgIGJvYXJkW3hdW3ldID0gbnVsbDtcbiAgICAgIH0pO1xuICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQbGFjZW1lbnRIYW5kbGVyO1xuIiwiaW1wb3J0IFBsYWNlbWVudEhhbmRsZXIgZnJvbSAnLi9zaGlwUGxhY2VtZW50SGFuZGxlcic7XG5pbXBvcnQgeyBnZW5lcmF0ZVNoaXBzIH0gZnJvbSAnLi91dGlscyc7XG5cbmNsYXNzIEdhbWVCb2FyZEhhbmRsZXIge1xuICAgY29uc3RydWN0b3IoKSB7XG4gICAgICB0aGlzLmJvYXJkU2l6ZSA9IDg7XG4gICAgICB0aGlzLlNoaXBzID0gZ2VuZXJhdGVTaGlwcygpO1xuICAgICAgdGhpcy5ib2FyZCA9IHRoaXMuY3JlYXRlYm9hcmQodGhpcy5ib2FyZFNpemUpO1xuICAgICAgdGhpcy5wbGFjZVNoaXBzUmFuZG9tbHkoKTtcbiAgIH1cblxuICAgY3JlYXRlYm9hcmQoc2l6ZSkge1xuICAgICAgcmV0dXJuIG5ldyBBcnJheShzaXplKS5maWxsKG51bGwpLm1hcCgoKSA9PiBuZXcgQXJyYXkoc2l6ZSkuZmlsbChudWxsKSk7XG4gICB9XG5cbiAgIHBsYWNlU2hpcHNSYW5kb21seSgpIHtcbiAgICAgIFBsYWNlbWVudEhhbmRsZXIucGxhY2VSYW5kb20odGhpcy5TaGlwcywgdGhpcy5ib2FyZCk7XG4gICB9XG5cbiAgIHBsYWNlU2hpcEF0KHNoaXAsIHN0cnRDZWxsLCBkaXIpIHtcbiAgICAgIHJldHVybiBQbGFjZW1lbnRIYW5kbGVyLnRyeVRvUGxhY2Uoc2hpcCwgdGhpcy5ib2FyZCwgc3RydENlbGwsIGRpcik7XG4gICB9XG5cbiAgIHJlbW92ZVNoaXAoc2hpcCkge1xuICAgICAgUGxhY2VtZW50SGFuZGxlci5yZW1vdmVTaGlwRnJvbUJvYXJkKHNoaXAsIHRoaXMuYm9hcmQpO1xuICAgfVxuXG4gICBhcmVTaGlwc1N1bmsoKSB7XG4gICAgICByZXR1cm4gIXRoaXMuU2hpcHMuc29tZSgoc2hpcCkgPT4gIXNoaXAuaXNTdW5rKCkpO1xuICAgfVxuXG4gICByZWNlaXZlQXR0YWNrKFt4LCB5XSkge1xuICAgICAgaWYgKHRoaXMuYm9hcmRbeF1beV0gPT09IG51bGwpIHtcbiAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2hpcCA9IHRoaXMuYm9hcmRbeF1beV07XG4gICAgICBzaGlwLmhpdCgpO1xuICAgICAgdGhpcy5ib2FyZFt4XVt5XSA9IG51bGw7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgIH1cblxuICAgZ2V0U2hpcHMoKSB7XG4gICAgICByZXR1cm4gdGhpcy5TaGlwcztcbiAgIH1cblxuICAgZ2V0Qm9hcmQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5ib2FyZDtcbiAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR2FtZUJvYXJkSGFuZGxlcjtcbiIsImltcG9ydCBHYW1lQm9hcmRIYW5kbGVyIGZyb20gXCIuL2dhbWVib2FyZFwiO1xuXG5jbGFzcyBQbGF5ZXIge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpe1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmdhbWVib2FyZEhhbmRsZXIgPSBuZXcgR2FtZUJvYXJkSGFuZGxlcigpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGxheWVyOyIsImltcG9ydCB7IGNoZWNrQm91bmQsIGdldFJhbmRvbUVtcHR5Q2VsbCB9IGZyb20gJy4vdXRpbHMnO1xuXG5jbGFzcyBBSSB7XG4gICBjb25zdHJ1Y3RvcihhdHRhY2tmbikge1xuICAgICAgdGhpcy5ib2FyZCA9IHRoaXMuY3JlYXRlQm9hcmQoOCk7XG4gICAgICB0aGlzLm5leHRNb3ZlcyA9IFtdO1xuICAgICAgdGhpcy5jdXJySGl0Q2VsbHMgPSBbXTtcbiAgICAgIHRoaXMuYXR0YWNrZm4gPSBhdHRhY2tmbjtcbiAgIH1cblxuICAgY3JlYXRlQm9hcmQoc2l6ZSkge1xuICAgICAgcmV0dXJuIG5ldyBBcnJheShzaXplKS5maWxsKG51bGwpLm1hcCgoKSA9PiBuZXcgQXJyYXkoc2l6ZSkuZmlsbChudWxsKSk7XG4gICB9XG5cblxuICAgcGxheU1vdmUoKSB7XG4gICAgICBpZiAodGhpcy5uZXh0TW92ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgcmV0dXJuIHRoaXMucGxheVNtYXJ0KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnBsYXlSYW5kb20oKTtcbiAgIH1cblxuICAgcGxheVJhbmRvbSgpIHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0ge307XG4gICAgICBjb25zdCBjZWxsID0gZ2V0UmFuZG9tRW1wdHlDZWxsKHRoaXMuYm9hcmQpO1xuICAgICAgcmVzcG9uc2UuY2VsbCA9IGNlbGw7XG4gICAgICByZXNwb25zZS5oaXQgPSBmYWxzZTtcblxuICAgICAgaWYgKHRoaXMuaXNIaXQoY2VsbCkpIHtcbiAgICAgICAgIHJlc3BvbnNlLmhpdCA9IHRydWU7XG4gICAgICAgICB0aGlzLmN1cnJIaXRDZWxscyA9IFtdO1xuICAgICAgICAgdGhpcy5jdXJySGl0Q2VsbHMucHVzaChjZWxsKTtcbiAgICAgICAgIGNvbnN0IGhpdERpciA9IHRoaXMuY2FsY0hpdERpcmVjdGlvbigpO1xuICAgICAgICAgdGhpcy5zZXROZXh0TW92ZXMoY2VsbCwgaGl0RGlyKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgfVxuXG4gICBwbGF5U21hcnQoKSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IHt9O1xuICAgICAgY29uc3QgY2VsbCA9IHRoaXMubmV4dE1vdmVzLnBvcCgpO1xuICAgICAgcmVzcG9uc2UuY2VsbCA9IGNlbGw7XG4gICAgICByZXNwb25zZS5oaXQgPSBmYWxzZTtcblxuICAgICAgaWYgKHRoaXMuaXNIaXQoY2VsbCkpIHtcbiAgICAgICAgIHJlc3BvbnNlLmhpdCA9IHRydWU7XG4gICAgICAgICB0aGlzLmN1cnJIaXRDZWxscy5wdXNoKGNlbGwpO1xuXG4gICAgICAgICBjb25zdCBoaXREaXIgPSB0aGlzLmNhbGNIaXREaXJlY3Rpb24oKTtcblxuICAgICAgICAgaWYgKCF0aGlzLnNldE5leHRNb3ZlcyhjZWxsLCBoaXREaXIpKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZURpcigpO1xuICAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnJIaXRDZWxscy5sZW5ndGggPiAxKSB7XG4gICAgICAgICB0aGlzLmNoYW5nZURpcigpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICB9XG5cbiAgIGlzSGl0KFt4LCB5XSkge1xuICAgICAgdGhpcy5ib2FyZFt4XVt5XSA9ICcjJztcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gdGhpcy5hdHRhY2tmbihbeCwgeV0pO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgfVxuXG4gICBjYWxjSGl0RGlyZWN0aW9uKCkge1xuICAgICAgY29uc3QgbGVuID0gdGhpcy5jdXJySGl0Q2VsbHMubGVuZ3RoO1xuICAgICAgY29uc3QgZGlyID0gW1xuICAgICAgICAgWzAsIDFdLFxuICAgICAgICAgWzEsIDBdLFxuICAgICAgICAgWzAsIC0xXSxcbiAgICAgICAgIFstMSwgMF1cbiAgICAgIF07XG5cbiAgICAgIGlmIChsZW4gPiAxKSB7XG4gICAgICAgICBjb25zdCBbeDIsIHkyXSA9IHRoaXMuY3VyckhpdENlbGxzW2xlbiAtIDFdO1xuICAgICAgICAgY29uc3QgW3gxLCB5MV0gPSB0aGlzLmN1cnJIaXRDZWxsc1tsZW4gLSAyXTtcblxuICAgICAgICAgcmV0dXJuIFtbeDIgLSB4MSwgeTIgLSB5MV1dO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGlyO1xuICAgfVxuXG4gICBjaGFuZ2VEaXIoKSB7XG4gICAgICB0aGlzLmN1cnJIaXRDZWxscy5yZXZlcnNlKCk7XG5cbiAgICAgIGNvbnN0IHJldkhpdERpciA9IHRoaXMuY2FsY0hpdERpcmVjdGlvbigpO1xuICAgICAgdGhpcy5zZXROZXh0TW92ZXMoLi4udGhpcy5jdXJySGl0Q2VsbHMuc2xpY2UoLTEpLCByZXZIaXREaXIpO1xuICAgfVxuXG4gICBzZXROZXh0TW92ZXMoW3gsIHldLCBkaXIpIHtcbiAgICAgIHRoaXMubmV4dE1vdmVzID0gW107XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlyLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICBjb25zdCBuWCA9IHggKyBkaXJbaV1bMF07XG4gICAgICAgICBjb25zdCBuWSA9IHkgKyBkaXJbaV1bMV07XG5cbiAgICAgICAgIGlmIChjaGVja0JvdW5kKFtuWCwgblldLCB0aGlzLmJvYXJkKSAmJiB0aGlzLmJvYXJkW25YXVtuWV0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMubmV4dE1vdmVzLnB1c2goW25YLCBuWV0pO1xuICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5uZXh0TW92ZXMubGVuZ3RoICE9PSAwO1xuICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBSTtcbiIsImltcG9ydCB7IGluaXRpYWxpemVHYW1lIH0gZnJvbSBcIi4vbW9kdWxlcy9nYW1lQ29udG9sbGVyXCI7XG5pbXBvcnQgeyBpbml0VUkgfSBmcm9tIFwiLi9tb2R1bGVzL2dhbWVVSVwiO1xuXG5pbml0VUkoKTtcbmluaXRpYWxpemVHYW1lKCk7Il0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwibmFtZSIsImxlbmd0aCIsInRoaXMiLCJoZWFsdGgiLCJjb29yZGluYXRlcyIsIm9yaWVudGF0aW9uIiwiaGl0IiwiaXNTdW5rIiwiZGlycyIsIngiLCJ5Iiwic2VsZWN0UmFuZG9tIiwiYXJyYXkiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJnZXRSYW5kb21FbXB0eUNlbGwiLCJib2FyZCIsImVtcHR5Q2VsbHMiLCJpIiwiaiIsInB1c2giLCJnZXRSYW5kb21Db2xvciIsImNoZWNrQm91bmQiLCJwbGF5ZXJCb2FyZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbXB1dGVyQm9hcmQiLCJtZXNzYWdlQ29udGFpbmVyIiwiZ3JpZFNpemUiLCJjcmVhdGVHcmlkIiwiY29udGFpbmVyIiwiaW5uZXJIVE1MIiwiY2VsbCIsImNyZWF0ZUNlbGwiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJkYXRhc2V0IiwibWFya0NlbGwiLCJib2FyZERpc3BsYXkiLCJncmlkQ2VsbCIsImNvbnRhaW5zIiwiZWwiLCJwcmVwZW5kIiwic2hvd01lc3NhZ2UiLCJtZXNzYWdlIiwidGV4dENvbnRlbnQiLCJDZWxscyIsIm1hcHBlciIsIk1hcCIsImJvYXJkSGFuZGxlciIsImN1cnJTaGlwIiwiaW5pdGlhbFgiLCJpbml0aWFsWSIsImlzZHJhZ2dpbmciLCJzdGFydENlbGwiLCJoYW5kbGVEcmFnU3RhcnQiLCJlIiwidGFyZ2V0Iiwic3R5bGUiLCJyZW1vdmVQcm9wZXJ0eSIsImNsaWVudFgiLCJjbGllbnRZIiwiaGFuZGxlRHJhZ0VuZCIsInJlbW92ZSIsImxlZnQiLCJ0b3AiLCJzaGlwQ29tcG9uZW50Iiwic3RydENlbGwiLCJOdW1iZXIiLCJzaGlwIiwiZ2V0IiwicGxhY2VTaGlwQXQiLCJpc1BsYWNlYWJsZSIsImJhY2tncm91bmRDb2xvciIsImNsZWFySGlnaGxpZ2h0IiwiaGFuZGxlRHJhZ2dpbmciLCJyZW1vdmVTaGlwIiwiZmluZFN0YXJ0Q2VsbCIsInJlcWxlbmd0aCIsIm5lYXJieUNlbGxzIiwiY2VsbExpc3QiLCJzdHJ0eCIsInN0cnR5IiwiY3VyckRpciIsIm54IiwibnkiLCJnZXRCb2FyZCIsImdldE5lYXJieUNlbGxzIiwiZm9yRWFjaCIsImhpZ2hsaWdodENlbGxzIiwicm90YXRlU2hpcCIsImJ1dHRvbiIsImNlbGxTaXplIiwibmV3ZGlyIiwid2lkdGgiLCJtYXgiLCJoZWlnaHQiLCJtaW5EaXN0IiwiSW5maW5pdHkiLCJkaXN0IiwiYWJzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicXVlcnlTZWxlY3RvckFsbCIsIm1haW5CdXR0b24iLCJhdHRhY2tDZWxsIiwicGxheWVyU2VsZWN0aW9uIiwiaXNHYW1lT3ZlciIsImNvbXB1dGVyIiwiZ2FtZWJvYXJkSGFuZGxlciIsInJlY2VpdmVBdHRhY2siLCJjb21wdXRlckJvYXJkRGlzcGxheSIsIkFJIiwicGxheU1vdmUiLCJwbGF5ZXJCb2FyZERpc3BsYXkiLCJwbGF5Um91bmQiLCJwbGFjZVJhbmRvbSIsIlNoaXBzIiwicXVldWUiLCJzaGlmdCIsInRyeVRvUGxhY2UiLCJkaXIiLCJyZW1vdmVTaGlwRnJvbUJvYXJkIiwibmV3Q29vcmRzIiwiY2VsbHMiLCJwb3NYIiwicG9zWSIsImJvYXJkU2l6ZSIsImNyZWF0ZWJvYXJkIiwicGxhY2VTaGlwc1JhbmRvbWx5Iiwic2l6ZSIsIkFycmF5IiwiZmlsbCIsIm1hcCIsImFyZVNoaXBzU3VuayIsInNvbWUiLCJnZXRTaGlwcyIsImF0dGFja2ZuIiwiY3JlYXRlQm9hcmQiLCJuZXh0TW92ZXMiLCJjdXJySGl0Q2VsbHMiLCJwbGF5U21hcnQiLCJwbGF5UmFuZG9tIiwicmVzcG9uc2UiLCJpc0hpdCIsImhpdERpciIsImNhbGNIaXREaXJlY3Rpb24iLCJzZXROZXh0TW92ZXMiLCJwb3AiLCJjaGFuZ2VEaXIiLCJsZW4iLCJ4MiIsInkyIiwieDEiLCJ5MSIsInJldmVyc2UiLCJyZXZIaXREaXIiLCJzbGljZSIsIm5YIiwiblkiLCJodW1hbiIsIndpbm5lciIsImluaXRpYWxpemVHYW1lIiwiYmluZCIsInBsYXllciIsImNsZWFyIiwiY3JlYXRlU2hpcENvbXBvbmVudCIsInNldCIsImtleXMiLCJhZGRFdmVudExpc3RlbmVyIiwicHJldmVudERlZmF1bHQiLCJlbmFibGVEcmFnRHJvcCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNhYmxlRHJhZ0Ryb3AiLCJ0b2dnbGUiXSwic291cmNlUm9vdCI6IiJ9